!function t(e,i,s){function a(h,n){if(!i[h]){if(!e[h]){var r="function"==typeof require&&require;if(!n&&r)return r(h,!0);if(o)return o(h,!0);var p=new Error("Cannot find module '"+h+"'");throw p.code="MODULE_NOT_FOUND",p}var l=i[h]={exports:{}};e[h][0].call(l.exports,function(t){var i=e[h][1][t];return a(i?i:t)},l,l.exports,t,e,i,s)}return i[h].exports}for(var o="function"==typeof require&&require,h=0;h<s.length;h++)a(s[h]);return a}({1:[function(t,e,i){"use strict";var s=function(t){this.state=t,this.game=t.game,this.scoreHtml=document.getElementById("score"),this.shipsHtml=document.getElementById("ships"),this.waveHtml=document.getElementById("wave"),this.levelHtml=document.getElementById("levelNo")};s.prototype.setText=function(t){this.msgText.text=t,this.msgText.update()},s.prototype.update=function(){var t=String(window.gdata.score);if(t.length<7)for(var e=7-t.length,i=0;i<e;i++)t="0"+t;this.scoreHtml.innerText=t,this.shipsHtml.innerText=String(window.gdata.ships);var s=100*(window.gdata.wave/window.gdata.wavemax);this.waveHtml.style.width=s+"px",this.levelHtml.innerText=window.gdata.level},e.exports=s},{}],2:[function(t,e,i){const s=new Phaser.Game(624,504,Phaser.AUTO,"unipede-game");s.state.add("boot",t("./states/boot")),s.state.add("game",t("./states/game")),s.state.add("gameover",t("./states/gameover")),s.state.add("levelup",t("./states/levelup")),s.state.add("menu",t("./states/menu")),s.state.add("preloader",t("./states/preloader")),s.state.add("tryagain",t("./states/tryagain")),s.state.start("boot")},{"./states/boot":10,"./states/game":11,"./states/gameover":12,"./states/levelup":13,"./states/menu":14,"./states/preloader":15,"./states/tryagain":16}],3:[function(t,e,i){"use strict";var s=function(t){this.state=t,this.game=t.game,Phaser.Group.call(this,this.state.game),this.game.add.existing(this),this.createMultiple(25,"tiles",0),this.callAll("animations.add","animations","explode",[15,16,17,18,19]),this.setAll("scale.x",2),this.setAll("scale.y",2),this.setAll("anchor.x",.5),this.setAll("anchor.y",.5),this.callAll("kill")};s.prototype=Object.create(Phaser.Group.prototype),s.prototype.constructor=s,s.prototype.explode=function(t,e){var i=this.getFirstDead();i&&(i.reset(t,e),i.scale.setTo(2,2),i.animations.play("explode",9,!1,!0))},s.prototype.explodeBig=function(t,e){var i=this.getFirstDead();i&&(i.reset(t,e),i.scale.setTo(2.5,2.5),i.animations.play("explode",9,!1,!0))},s.prototype.update=function(){},e.exports=s},{}],4:[function(t,e,i){"use strict";var s=function(t){this.state=t,this.game=t.game,Phaser.Sprite.call(this,this.game,0,0,"tiles",20),this.game.add.existing(this),this.game.physics.enable(this,Phaser.Physics.ARCADE),this.anchor.setTo(.5,.5),this.speed=8e3,this.kill(),this.events.onKilled.addOnce(this.killed,this)};s.prototype=Object.create(Phaser.Sprite.prototype),s.prototype.constructor=s,s.prototype.overlap=function(t,e){this.explosionGroup.explode(t.x,t.y),this.explosionSfx.play(),e.kill(),t.kill(),window.gdata.score+=this.game.rnd.integerInRange(20,75),this.huds.update()},s.prototype.init=function(){this.reset(0,0),this.body.angularVelocity=180,this.stween&&this.game.tweens.remove(this.stween),this.stween=this.game.add.tween(this),this.stween.to({width:48,height:48},250,Phaser.Easing.Sinusoidal.InOut,!0,null,!1,!0),this.mtween&&this.game.tweens.remove(this.mtween),this.mtween=this.game.add.tween(this),Phaser.Utils.chanceRoll(10)?(this.x=12,this.y=360,this.mtween.to({x:[152,152,292,444,292,360,12,152,292,292,152,-12],y:[480,360,480,360,360,480,360,480,360,480,360,480]},this.speed,"Linear")):(this.x=612,this.y=360,this.mtween.to({x:[472,332,192,52,192,472,612,472,472,332,332,472,612],y:[480,360,480,360,360,480,360,360,480,360,360,480,360]},this.speed,"Linear")),this.mtween.onComplete.add(this.finishMove,this),this.mtween.start()},s.prototype.finishMove=function(){this.kill()},s.prototype.killed=function(){this.mtween&&this.game.tweens.remove(this.mtween),this.stween&&this.game.tweens.remove(this.stween)},s.prototype.update=function(){},e.exports=s},{}],5:[function(t,e,i){"use strict";var s=function(t){this.state=t,this.game=t.game,Phaser.Sprite.call(this,this.game,0,0,"tiles",12),this.game.add.existing(this),this.game.physics.enable(this,Phaser.Physics.ARCADE),this.anchor.setTo(.5,.5),this.speed=75,this.animations.add("fly",[22,24,25,24],8,!0),this.kill()};s.prototype=Object.create(Phaser.Sprite.prototype),s.prototype.constructor=s,s.prototype.overlap=function(t,e){this.explosionGroup.explode(t.x,t.y),this.explosionSfx.play(),e.kill(),t.kill(),window.gdata.score+=Phaser.Utils.randomChoice(20,75),this.huds.update(),t.timer&&(this.game.time.events.remove(t.timer),t.mtween&&this.game.tweens.remove(t.mtween))},s.prototype.init=function(){this.alive||(this.reset(this.game.rnd.integerInRange(24,24*(this.state.map.width-2)),-12),this.animations.play("fly"),this.state.galaxianSfx.play(),this.drop())},s.prototype.drop=function(){if(this.alive)if(this.y<this.game.height){if(this.mtween&&this.game.tweens.remove(this.mtween),this.mtween=this.game.add.tween(this),this.mtween.to({y:"+24"},this.speed,Phaser.Easing.Linear.None),this.mtween.onComplete.addOnce(this.drop,this),this.mtween.start(),this.y<this.game.height-75){var t=this.state.map.getTile(parseInt(this.x/24),parseInt(this.y/24));t||Phaser.Utils.chanceRoll(40)&&this.state.map.putTile(2,parseInt(this.x/24),parseInt(this.y/24))}}else this.kill()},s.prototype.update=function(){},e.exports=s},{}],6:[function(t,e,i){"use strict";var s=function(t,e){this.state=t,this.game=t.game,this.laser=e,Phaser.Sprite.call(this,this.game,this.game.width/2,this.game.height-48,"tiles",1),this.game.add.existing(this),this.game.physics.enable(this,Phaser.Physics.ARCADE),this.cursors=this.game.input.keyboard.createCursorKeys(),this.checkWorldBounds=!0,this.anchor.setTo(.5,.5),this.body.collideWorldBounds=!0,this.body.bounce.setTo(1,1),this.speed=200,this.laser.bulletKillType=Phaser.Weapon.KILL_WORLD_BOUNDS,this.laser.bulletSpeed=900,this.laser.fireRate=200,this.laser.trackSprite(this,0,0,!0),this.fireButton=this.game.input.keyboard.addKey(Phaser.KeyCode.A),this.angle=-90,this.laser.collide=function(t,e){this.podHitSfx.play(),e.index>1&&e.index<6?this.map.putTile(e.index+1,e.x,e.y,this.layer1):this.map.putTile(null,e.x,e.y,this.layer1),t.kill()}};s.prototype=Object.create(Phaser.Sprite.prototype),s.prototype.constructor=s,s.prototype.move=function(){this.body.velocity.setTo(0,0),this.cursors.up.isDown&&this.y>408?this.body.velocity.y=-this.speed:this.cursors.down.isDown&&(this.body.velocity.y=this.speed),this.cursors.left.isDown?this.body.velocity.x=-this.speed:this.cursors.right.isDown&&(this.body.velocity.x=this.speed)},s.prototype.fire=function(){this.fireButton.isDown&&(this.laser.fire(),this.state.laserSfx.isPlaying||this.state.laserSfx.play())},s.prototype.update=function(){this.alive&&(this.move(),this.fire())},e.exports=s},{}],7:[function(t,e,i){"use strict";var s=function(t){this.state=t,this.game=t.game,Phaser.Group.call(this,this.state.game),this.game.add.existing(this),this.createMultiple(10,"shot",0,!0),this.setAll("alive",!1),this.setAll("visible",!1),this.setAll("outOfBoundsKill",!0),this.setAll("checkWorldBounds",!0),this.setAll("anchor.x",.5),this.setAll("anchor.y",.5)};s.prototype=Object.create(Phaser.Group.prototype),s.prototype.constructor=s,s.prototype.overlap=function(t,e){},s.prototype.fire=function(t,e){var i=this.getFirstDead();null!=i&&(i.reset(t,e),this.game.physics.enable(i,Phaser.Physics.ARCADE),i.visible=!0,i.body.angularVelocity=360,i.body.velocity.y=75+25*this.game.rnd.integerInRange(1,10))},s.prototype.update=function(){},e.exports=s},{}],8:[function(t,e,i){"use strict";var s=function(t){switch(this.state=t,this.game=t.game,Phaser.Sprite.call(this,this.game,0,0,"tiles",12),this.game.add.existing(this),this.game.physics.enable(this,Phaser.Physics.ARCADE),this.anchor.setTo(.5,.5),window.gdata.unipedeType){case 1:this.animations.add("crawl",[11,12,13,14],15,!0);break;case 2:this.animations.add("crawl",[25,26,27,28],15,!0)}this.kill()};s.prototype=Object.create(Phaser.Sprite.prototype),s.prototype.constructor=s,s.prototype.init=function(){var t=this.state.map;this.reset(24*this.game.rnd.integerInRange(5,t.width-5),-12,5),this.y=12,this.animations.play("crawl"),this.speed=50,this.hookSpeed=50,this.angle=0,this.hookstep=1,this.vdir=window.const.DOWN,this.direction=Phaser.Utils.randomChoice(window.const.HOOKRIGHT,window.const.HOOKLEFT),this.move()},s.prototype.hookMove=function(){var t;switch(this.vdir==window.const.DOWN?t="+8":this.vdir==window.const.UP&&(t="-8"),this.direction){case window.const.HOOKLEFT:switch(this.hookstep){case 1:this.mtween.to({x:"+8",y:t},this.hookSpeed,Phaser.Easing.Linear.None),this.angle=45;break;case 2:this.mtween.to({y:t},this.hookSpeed,Phaser.Easing.Linear.None),this.angle=90;break;case 3:this.mtween.to({x:"-4",y:t},this.hookSpeed,Phaser.Easing.Linear.None),this.angle=135,this.direction=window.const.LEFT}this.hookstep++;break;case window.const.HOOKRIGHT:switch(this.hookstep){case 1:this.mtween.to({x:"-12",y:t},this.hookSpeed,Phaser.Easing.Linear.None),this.angle=135;break;case 2:this.mtween.to({y:t},this.hookSpeed,Phaser.Easing.Linear.None),this.angle=90;break;case 3:this.mtween.to({x:"+12",y:t},this.hookSpeed,Phaser.Easing.Linear.None),this.angle=45,this.direction=window.const.RIGHT}this.hookstep++}},s.prototype.move=function(){var t=this.state.map;if(this.mtween&&this.game.tweens.remove(this.mtween),this.mtween=this.game.add.tween(this),this.y>=this.game.height-12&&(this.vdir=window.const.UP),this.y<=12&&(this.vdir=window.const.DOWN),this.direction==window.const.HOOKLEFT||this.direction==window.const.HOOKRIGHT)this.hookMove();else{switch(this.direction){case window.const.LEFT:var e=t.getTileWorldXY(this.x-24,this.y);!e&&this.x>=32?(this.mtween.to({x:"-12"},this.speed,Phaser.Easing.Linear.None),this.angle=180):(this.direction=window.const.HOOKRIGHT,this.hookstep=1,this.speed>10&&(this.speed-=2));break;case window.const.RIGHT:var e=t.getTileWorldXY(this.x+24,this.y);!e&&this.x<=this.game.width-32?(this.mtween.to({x:"+12"},this.speed,Phaser.Easing.Linear.None),this.angle=0):(this.direction=window.const.HOOKLEFT,this.hookstep=1,this.speed>10&&(this.speed-=2))}this.direction!=window.const.HOOKLEFT&&this.direction!=window.const.HOOKRIGHT||this.hookMove()}this.mtween&&(this.mtween.onComplete.addOnce(this.move,this),this.mtween.start())},s.prototype.imove=function(){var t=this.state.map,e=null;switch(this.game.tweens.remove(this.mtween),this.direction){case window.const.LEFT:e=t.getTileWorldXY(this.x,this.y,null,null,!0),this.angle=180,e||(this.mtween=this.game.add.tween(this),this.mtween.to({x:this.x-12},this.speed,Phaser.Easing.Linear.None),this.mtween.onComplete.addOnce(this.move,this),this.mtween.start());break;case window.const.RIGHT:e=t.getTileWorldXY(this.x,this.y),this.angle=0,e||(this.mtween=this.game.add.tween(this),this.mtween.to({x:this.x+12},this.speed,Phaser.Easing.Linear.None),this.mtween.onComplete.addOnce(this.move,this),this.mtween.start())}},s.prototype.update=function(){},e.exports=s},{}],9:[function(t,e,i){"use strict";var s=t("../prefabs/Unipede.js"),a=function(t){this.state=t,this.game=t.game,Phaser.Group.call(this,this.state.game),this.game.add.existing(this);for(var e=0;e<20;e++){var i=new s(this.state);this.add(i),i.kill()}this.wave=[];for(var e=0;e<30;e++)this.wave.push(this.game.rnd.integerInRange(0,3))};a.prototype=Object.create(Phaser.Group.prototype),a.prototype.constructor=a,a.prototype.overlap=function(t,e){t.kill(),this.explosionGroup.explode(e.x,e.y),this.explosionSfx.play();var i=parseInt(e.x/24),s=parseInt(e.y/24);this.map.putTile(2,i,s),e.kill(),window.gdata.score+=30,this.huds.update()},a.prototype.attack=function(){if(this.state.unipedeSfx.play(),0!=window.gdata.wave){var t=this.game.rnd.integerInRange(0,5);t>window.gdata.wave&&(t=window.gdata.wave),window.gdata.wave-=t,this.state.huds.update();for(var e=0;e<t;e++)this.create();this.timer=this.game.time.events.add(this.game.rnd.integerInRange(400,5e3),this.attack,this)}},a.prototype.fire=function(){if(this.fireTimer){var t=this.getRandomExists();t&&t.alive&&this.state.shotGroup.fire(t.x,t.y)}this.fireTimer=this.game.time.events.add(this.game.rnd.integerInRange(400,1e3),this.fire,this)},a.prototype.create=function(){if(!(this.countLiving()>15)){var t=this.getFirstDead();null!=t&&t.init()}},a.prototype.update=function(){},e.exports=a},{"../prefabs/Unipede.js":8}],10:[function(t,e,i){function s(){}window.const={LEFT:0,RIGHT:1,HOOKLEFT:2,HOOKRIGHT:3,UP:4,DOWN:5,WAIT:6},s.prototype.preload=function(){this.load.image("preloader","assets/preloader.gif")},s.prototype.create=function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0,this.game.scale.setScreenSize(!0)),this.game.state.start("preloader")},e.exports=s},{}],11:[function(t,e,i){"use strict";function s(){}var a=t("../prefabs/Player.js"),o=t("../prefabs/UnipedeGroup.js"),h=t("../prefabs/ExplosionGroup.js"),n=t("../prefabs/Galaxian.js"),r=t("../prefabs/Eye.js"),p=t("../classes/Huds.js"),l=t("../prefabs/ShotGroup.js");s.prototype.init=function(){},s.prototype.create=function(){for(var t=["explosion","laser","unipede","galaxian","death","hit","podHit"],e=0;e<t.length;e++)this[t[e]+"Sfx"]=this.game.add.audio(t[e]);this.huds=new p(this),this.huds.update(),this.initMap(),this.explosionGroup=new h(this),this.initPlayer(),this.shotGroup=new l(this),this.unipedeGroup=new o(this),this.galaxian=new n(this),this.eye=new r(this),this.camera.flash("#000000"),this.startTimer=this.game.time.events.add(1500,this.startGame,this)},s.prototype.startGame=function(){this.unipedeGroup.attack(),this.unipedeGroup.fire(),this.galaxianAttack(),this.eyeAttack()},s.prototype.galaxianAttack=function(){this.galaxian.alive||this.galaxian.init(),this.galaxianTimer=this.game.time.events.add(1e3*this.game.rnd.integerInRange(3,5),this.galaxianAttack,this)},s.prototype.eyeAttack=function(){this.eyeTimer=this.game.time.events.loop(1e3*this.game.rnd.integerInRange(15,25),function(){this.eye.alive||this.eye.init()},this)},s.prototype.initPlayer=function(){this.laser=this.game.add.weapon(3,"laser"),this.player=new a(this,this.laser)},s.prototype.initMap=function(){this.map=this.game.add.tilemap(),this.map.addTilesetImage(null,"tiles",24,24),this.layer1=this.map.create("blocks",26,21,24,24),this.layer1.resizeWorld();for(var t=0;t<20;t++){var e=this.game.rnd.integerInRange(0,this.map.width),i=this.game.rnd.integerInRange(1,this.map.height-5);this.map.putTile(2,e,i,this.layer1)}this.map.setCollisionBetween(2,9)},s.prototype.update=function(){this.game.physics.arcade.collide(this.player,this.layer1),this.game.physics.arcade.collide(this.laser.bullets,this.layer1,this.laser.collide,null,this),this.game.physics.arcade.overlap(this.laser.bullets,this.shotGroup,function(t,e){t.kill(),this.hitSfx.play()},null,this),this.game.physics.arcade.overlap(this.laser.bullets,this.unipedeGroup,this.unipedeGroup.overlap,null,this),this.game.physics.arcade.overlap(this.laser.bullets,this.galaxian,this.galaxian.overlap,null,this),this.game.physics.arcade.overlap(this.laser.bullets,this.eye,this.eye.overlap,null,this),window.gdata.wave>0||this.unipedeGroup.countLiving()>0?(this.game.physics.arcade.overlap(this.player,this.shotGroup,this.playerDeath,null,this),this.game.physics.arcade.overlap(this.player,this.unipedeGroup,this.playerDeath,null,this),this.game.physics.arcade.overlap(this.player,this.galaxian,this.playerDeath,null,this),this.game.physics.arcade.overlap(this.player,this.eye,this.playerDeath,null,this)):0==window.gdata.wave&&0==this.unipedeGroup.countLiving()&&this.game.state.start("levelup")},s.prototype.playerDeath=function(t,e){this.deathSfx.play(),this.explosionGroup.explodeBig(t.x,t.y),this.player.kill(),this.deathTimer=this.game.time.events.add(4e3,function(){0==window.gdata.ships?this.game.state.start("gameover"):(window.gdata.ships--,window.gdata.wave+=this.unipedeGroup.countLiving(),this.game.state.start("tryagain"))},this)},s.prototype.render=function(){},s.prototype.onInputDown=function(){this.game.state.start("gameover")},e.exports=s},{"../classes/Huds.js":1,"../prefabs/ExplosionGroup.js":3,"../prefabs/Eye.js":4,"../prefabs/Galaxian.js":5,"../prefabs/Player.js":6,"../prefabs/ShotGroup.js":7,"../prefabs/UnipedeGroup.js":9}],12:[function(t,e,i){function s(){}s.prototype.create=function(){window.gdata=null;var t=this.game.add.sprite(this.game.width/2,this.game.height/2,"gameovertxt",0);t.anchor.setTo(.5,.5),this.enterKey=this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER),this.game.input.keyboard.addKeyCapture([Phaser.Keyboard.ENTER]),this.keytrigger=!1,this.timer=this.game.time.events.add(2e3,function(){this.game.state.start("menu")},this)},s.prototype.update=function(){this.enterKey.isDown&&0==this.keytrigger?this.keytrigger=!0:!this.enterKey.isDown&&this.keytrigger&&this.game.state.start("menu")},e.exports=s},{}],13:[function(t,e,i){function s(){}s.prototype.create=function(){if(window.gdata){this.levelUpSfx=this.game.add.audio("levelUp"),this.levelUpSfx.play();var t=this.game.add.sprite(this.game.width/2,this.game.height/2,"leveluptxt",0);t.anchor.setTo(.5,.5),this.timer=this.game.time.events.add(2e3,this.startLevel,this)}else window.gdata={ships:3,score:0,level:0,wave:5,wavemax:5,unipedeType:2},this.startLevel()},s.prototype.update=function(){},s.prototype.startLevel=function(){window.gdata.level++,window.gdata.level>15&&(window.gdata.level=0),window.gdata.wave=5+2*window.gdata.level,window.gdata.wavemax=5+2*window.gdata.level,1==window.gdata.unipedeType?window.gdata.unipedeType=2:window.gdata.unipedeType=1,this.game.state.start("game")},e.exports=s},{}],14:[function(t,e,i){function s(){}s.prototype.create=function(){var t=this.game.add.sprite(this.game.width/2,100,"title",0);t.anchor.setTo(.5,.5),this.enterKey=this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER),this.game.input.keyboard.addKeyCapture([Phaser.Keyboard.ENTER]);var e=this.add.text(.5*this.game.width,120+.5*this.game.height,"Press                to start",{font:"16px Arial",fill:"#00ff00",align:"center"});e.anchor.setTo(.5,.5);for(var i=[2,12,20,23,1],s=0;s<i.length;s++)this.game.add.sprite(-80+this.game.width/2,170+35*s,"tiles",i[s]);for(var a=["Puff Pod","Unipede","Eye","Galaxian","Playa"],s=0;s<a.length;s++){this.add.text(15+.5*this.game.width,173+35*s,a[s],{font:"16px Arial",fill:"#00ffff",align:"center"})}this.startText=this.add.text(-3+.5*this.game.width,120+.5*this.game.height,"ENTER",{font:"16px Arial",fill:"#ffff00",align:"center"}),this.startText.anchor.set(.5,.5),this.startText.smoothed=!1,this.timer=this.game.time.events.loop(500,function(){this.startText.visible=!this.startText.visible},this),this.keytrigger=!1},s.prototype.update=function(){this.enterKey.isDown&&0==this.keytrigger?this.keytrigger=!0:!this.enterKey.isDown&&this.keytrigger&&this.game.state.start("levelup")},e.exports=s},{}],15:[function(t,e,i){function s(){this.asset=null,this.ready=!1}s.prototype.preload=function(){this.asset=this.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.load.setPreloadSprite(this.asset),this.loadResources(),this.ready=!0},s.prototype.loadResources=function(){this.game.load.spritesheet("tiles","assets/tiles.png",24,24),this.game.load.spritesheet("shot","assets/shot.png",14,14),this.game.load.image("laser","assets/laser.png"),this.game.load.image("title","assets/title.png"),this.game.load.image("tryagaintxt","assets/tryagaintxt.png"),this.game.load.image("gameovertxt","assets/gameovertxt.png"),this.game.load.image("leveluptxt","assets/leveluptxt.png");for(var t=["explosion","laser","unipede","galaxian","levelUp","death","hit","podHit"],e=0;e<t.length;e++)this.game.load.audio(t[e],"assets/sfx/"+t[e]+".wav")},s.prototype.create=function(){},s.prototype.update=function(){this.game.state.start("menu")},s.prototype.onLoadComplete=function(){},e.exports=s},{}],16:[function(t,e,i){function s(){}s.prototype.create=function(){var t=this.game.add.sprite(this.game.width/2,this.game.height/2,"tryagaintxt",0);t.anchor.setTo(.5,.5),this.timer=this.game.time.events.add(1500,function(){this.game.state.start("game")},this)},s.prototype.update=function(){},e.exports=s},{}]},{},[2]);
