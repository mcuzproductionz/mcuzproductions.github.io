!function n(o,r,l){function h(t,e){if(!r[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(u)return u(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var s=r[t]={exports:{}};o[t][0].call(s.exports,function(e){return h(o[t][1][e]||e)},s,s.exports,n,o,r,l)}return r[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)h(l[e]);return h}({1:[function(e,t,i){t.exports=e("./lib/heap")},{"./lib/heap":2}],2:[function(e,t,i){(function(){var e,f,l,d,p,i,h,a,m,g,s,n,o,u,c;l=Math.floor,g=Math.min,f=function(e,t){return e<t?-1:t<e?1:0},m=function(e,t,i,a,s){var n;if(null==i&&(i=0),null==s&&(s=f),i<0)throw new Error("lo must be non-negative");for(null==a&&(a=e.length);i<a;)s(t,e[n=l((i+a)/2)])<0?a=n:i=n+1;return[].splice.apply(e,[i,i-i].concat(t)),t},i=function(e,t,i){return null==i&&(i=f),e.push(t),u(e,0,e.length-1,i)},p=function(e,t){var i,a;return null==t&&(t=f),i=e.pop(),e.length?(a=e[0],e[0]=i,c(e,0,t)):a=i,a},a=function(e,t,i){var a;return null==i&&(i=f),a=e[0],e[0]=t,c(e,0,i),a},h=function(e,t,i){var a;return null==i&&(i=f),e.length&&i(e[0],t)<0&&(t=(a=[e[0],t])[0],e[0]=a[1],c(e,0,i)),t},d=function(i,e){var t,a,s,n,o,r;for(null==e&&(e=f),o=[],a=0,s=(n=function(){r=[];for(var e=0,t=l(i.length/2);0<=t?e<t:t<e;0<=t?e++:e--)r.push(e);return r}.apply(this).reverse()).length;a<s;a++)t=n[a],o.push(c(i,t,e));return o},o=function(e,t,i){var a;if(null==i&&(i=f),-1!==(a=e.indexOf(t)))return u(e,0,a,i),c(e,a,i)},s=function(e,t,i){var a,s,n,o,r;if(null==i&&(i=f),!(s=e.slice(0,t)).length)return s;for(d(s,i),n=0,o=(r=e.slice(t)).length;n<o;n++)a=r[n],h(s,a,i);return s.sort(i).reverse()},n=function(e,t,i){var a,s,n,o,r,l,h,u,c;if(null==i&&(i=f),10*t<=e.length){if(!(n=e.slice(0,t).sort(i)).length)return n;for(s=n[n.length-1],o=0,l=(h=e.slice(t)).length;o<l;o++)i(a=h[o],s)<0&&(m(n,a,0,null,i),n.pop(),s=n[n.length-1]);return n}for(d(e,i),c=[],r=0,u=g(t,e.length);0<=u?r<u:u<r;0<=u?++r:--r)c.push(p(e,i));return c},u=function(e,t,i,a){var s,n,o;for(null==a&&(a=f),s=e[i];t<i&&a(s,n=e[o=i-1>>1])<0;)e[i]=n,i=o;return e[i]=s},c=function(e,t,i){var a,s,n,o,r;for(null==i&&(i=f),s=e.length,n=e[r=t],a=2*t+1;a<s;)(o=a+1)<s&&!(i(e[a],e[o])<0)&&(a=o),e[t]=e[a],a=2*(t=a)+1;return e[t]=n,u(e,r,t,i)},e=function(){function t(e){this.cmp=null!=e?e:f,this.nodes=[]}return t.push=i,t.pop=p,t.replace=a,t.pushpop=h,t.heapify=d,t.updateItem=o,t.nlargest=s,t.nsmallest=n,t.prototype.push=function(e){return i(this.nodes,e,this.cmp)},t.prototype.pop=function(){return p(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},t.prototype.replace=function(e){return a(this.nodes,e,this.cmp)},t.prototype.pushpop=function(e){return h(this.nodes,e,this.cmp)},t.prototype.heapify=function(){return d(this.nodes,this.cmp)},t.prototype.updateItem=function(e){return o(this.nodes,e,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),(null!=t?t.exports:void 0)?t.exports=e:window.Heap=e}).call(this)},{}],3:[function(e,t,i){t.exports=e("./src/PathFinding")},{"./src/PathFinding":4}],4:[function(e,t,i){t.exports={Heap:e("heap"),Node:e("./core/Node"),Grid:e("./core/Grid"),Util:e("./core/Util"),DiagonalMovement:e("./core/DiagonalMovement"),Heuristic:e("./core/Heuristic"),AStarFinder:e("./finders/AStarFinder"),BestFirstFinder:e("./finders/BestFirstFinder"),BreadthFirstFinder:e("./finders/BreadthFirstFinder"),DijkstraFinder:e("./finders/DijkstraFinder"),BiAStarFinder:e("./finders/BiAStarFinder"),BiBestFirstFinder:e("./finders/BiBestFirstFinder"),BiBreadthFirstFinder:e("./finders/BiBreadthFirstFinder"),BiDijkstraFinder:e("./finders/BiDijkstraFinder"),IDAStarFinder:e("./finders/IDAStarFinder"),JumpPointFinder:e("./finders/JumpPointFinder")}},{"./core/DiagonalMovement":5,"./core/Grid":6,"./core/Heuristic":7,"./core/Node":8,"./core/Util":9,"./finders/AStarFinder":10,"./finders/BestFirstFinder":11,"./finders/BiAStarFinder":12,"./finders/BiBestFirstFinder":13,"./finders/BiBreadthFirstFinder":14,"./finders/BiDijkstraFinder":15,"./finders/BreadthFirstFinder":16,"./finders/DijkstraFinder":17,"./finders/IDAStarFinder":18,"./finders/JumpPointFinder":23,heap:1}],5:[function(e,t,i){t.exports={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4}},{}],6:[function(e,t,i){var r=e("./Node"),p=e("./DiagonalMovement");function l(e,t,i){var a;"object"!=typeof e?a=e:(t=e.length,a=e[0].length,i=e),this.width=a,this.height=t,this.nodes=this._buildNodes(a,t,i)}l.prototype._buildNodes=function(e,t,i){var a,s,n=new Array(t);for(a=0;a<t;++a)for(n[a]=new Array(e),s=0;s<e;++s)n[a][s]=new r(s,a);if(void 0===i)return n;if(i.length!==t||i[0].length!==e)throw new Error("Matrix size does not fit");for(a=0;a<t;++a)for(s=0;s<e;++s)i[a][s]&&(n[a][s].walkable=!1);return n},l.prototype.getNodeAt=function(e,t){return this.nodes[t][e]},l.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable},l.prototype.isInside=function(e,t){return 0<=e&&e<this.width&&0<=t&&t<this.height},l.prototype.setWalkableAt=function(e,t,i){this.nodes[t][e].walkable=i},l.prototype.getNeighbors=function(e,t){var i=e.x,a=e.y,s=[],n=!1,o=!1,r=!1,l=!1,h=!1,u=!1,c=!1,f=!1,d=this.nodes;if(this.isWalkableAt(i,a-1)&&(s.push(d[a-1][i]),n=!0),this.isWalkableAt(i+1,a)&&(s.push(d[a][i+1]),r=!0),this.isWalkableAt(i,a+1)&&(s.push(d[a+1][i]),h=!0),this.isWalkableAt(i-1,a)&&(s.push(d[a][i-1]),c=!0),t===p.Never)return s;if(t===p.OnlyWhenNoObstacles)o=c&&n,l=n&&r,u=r&&h,f=h&&c;else if(t===p.IfAtMostOneObstacle)o=c||n,l=n||r,u=r||h,f=h||c;else{if(t!==p.Always)throw new Error("Incorrect value of diagonalMovement");f=u=l=o=!0}return o&&this.isWalkableAt(i-1,a-1)&&s.push(d[a-1][i-1]),l&&this.isWalkableAt(i+1,a-1)&&s.push(d[a-1][i+1]),u&&this.isWalkableAt(i+1,a+1)&&s.push(d[a+1][i+1]),f&&this.isWalkableAt(i-1,a+1)&&s.push(d[a+1][i-1]),s},l.prototype.clone=function(){var e,t,i=this.width,a=this.height,s=this.nodes,n=new l(i,a),o=new Array(a);for(e=0;e<a;++e)for(o[e]=new Array(i),t=0;t<i;++t)o[e][t]=new r(t,e,s[e][t].walkable);return n.nodes=o,n},t.exports=l},{"./DiagonalMovement":5,"./Node":8}],7:[function(e,t,i){t.exports={manhattan:function(e,t){return e+t},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},octile:function(e,t){var i=Math.SQRT2-1;return e<t?i*e+t:i*t+e},chebyshev:function(e,t){return Math.max(e,t)}}},{}],8:[function(e,t,i){t.exports=function(e,t,i){this.x=e,this.y=t,this.walkable=void 0===i||i}},{}],9:[function(e,t,i){function s(e){for(var t=[[e.x,e.y]];e.parent;)e=e.parent,t.push([e.x,e.y]);return t.reverse()}function g(e,t,i,a){var s,n,o,r,l,h,u=Math.abs,c=[];for(s=e<i?1:-1,n=t<a?1:-1,l=(o=u(i-e))-(r=u(a-t));c.push([e,t]),e!==i||t!==a;)-r<(h=2*l)&&(l-=r,e+=s),h<o&&(l+=o,t+=n);return c}i.backtrace=s,i.biBacktrace=function(e,t){var i=s(e),a=s(t);return i.concat(a.reverse())},i.pathLength=function(e){var t,i,a,s,n,o=0;for(t=1;t<e.length;++t)i=e[t-1],a=e[t],s=i[0]-a[0],n=i[1]-a[1],o+=Math.sqrt(s*s+n*n);return o},i.interpolate=g,i.expandPath=function(e){var t,i,a,s,n,o,r=[],l=e.length;if(l<2)return r;for(n=0;n<l-1;++n)for(t=e[n],i=e[n+1],s=(a=g(t[0],t[1],i[0],i[1])).length,o=0;o<s-1;++o)r.push(a[o]);return r.push(e[l-1]),r},i.smoothenPath=function(e,t){var i,a,s,n,o,r,l,h,u,c=t.length,f=t[0][0],d=t[0][1],p=t[c-1][0],m=t[c-1][1];for(s=[[i=f,a=d]],n=2;n<c;++n){for(l=g(i,a,(r=t[n])[0],r[1]),u=!1,o=1;o<l.length;++o)if(h=l[o],!e.isWalkableAt(h[0],h[1])){u=!0;break}u&&(lastValidCoord=t[n-1],s.push(lastValidCoord),i=lastValidCoord[0],a=lastValidCoord[1])}return s.push([p,m]),s},i.compressPath=function(e){if(e.length<3)return e;var t,i,a,s,n,o,r=[],l=e[0][0],h=e[0][1],u=e[1][0],c=e[1][1],f=u-l,d=c-h;for(f/=n=Math.sqrt(f*f+d*d),d/=n,r.push([l,h]),o=2;o<e.length;o++)t=u,i=c,a=f,s=d,f=(u=e[o][0])-t,d=(c=e[o][1])-i,d/=n=Math.sqrt(f*f+d*d),(f/=n)===a&&d===s||r.push([t,i]);return r.push([u,c]),r}},{}],10:[function(e,t,i){var k=e("heap"),x=e("../core/Util"),a=e("../core/Heuristic"),s=e("../core/DiagonalMovement");function n(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||a.manhattan,this.weight=e.weight||1,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never),this.diagonalMovement===s.Never?this.heuristic=e.heuristic||a.manhattan:this.heuristic=e.heuristic||a.octile}n.prototype.findPath=function(e,t,i,a,s){var n,o,r,l,h,u,c,f,d=new k(function(e,t){return e.f-t.f}),p=s.getNodeAt(e,t),m=s.getNodeAt(i,a),g=this.heuristic,y=this.diagonalMovement,v=this.weight,b=Math.abs,S=Math.SQRT2;for(p.g=0,p.f=0,d.push(p),p.opened=!0;!d.empty();){if((n=d.pop()).closed=!0,n===m)return x.backtrace(m);for(l=0,h=(o=s.getNeighbors(n,y)).length;l<h;++l)(r=o[l]).closed||(u=r.x,c=r.y,f=n.g+(u-n.x==0||c-n.y==0?1:S),(!r.opened||f<r.g)&&(r.g=f,r.h=r.h||v*g(b(u-i),b(c-a)),r.f=r.g+r.h,r.parent=n,r.opened?d.updateItem(r):(d.push(r),r.opened=!0)))}return[]},t.exports=n},{"../core/DiagonalMovement":5,"../core/Heuristic":7,"../core/Util":9,heap:1}],11:[function(e,t,i){var a=e("./AStarFinder");function s(e){a.call(this,e);var i=this.heuristic;this.heuristic=function(e,t){return 1e6*i(e,t)}}(s.prototype=new a).constructor=s,t.exports=s},{"./AStarFinder":10}],12:[function(e,t,i){var w=e("heap"),P=e("../core/Util"),a=e("../core/Heuristic"),s=e("../core/DiagonalMovement");function n(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||a.manhattan,this.weight=e.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never),this.diagonalMovement===s.Never?this.heuristic=e.heuristic||a.manhattan:this.heuristic=e.heuristic||a.octile}n.prototype.findPath=function(e,t,i,a,s){var n,o,r,l,h,u,c,f,d=function(e,t){return e.f-t.f},p=new w(d),m=new w(d),g=s.getNodeAt(e,t),y=s.getNodeAt(i,a),v=this.heuristic,b=this.diagonalMovement,S=this.weight,k=Math.abs,x=Math.SQRT2;for(g.g=0,g.f=0,p.push(g),g.opened=1,y.g=0,y.f=0,m.push(y),y.opened=2;!p.empty()&&!m.empty();){for((n=p.pop()).closed=!0,l=0,h=(o=s.getNeighbors(n,b)).length;l<h;++l)if(!(r=o[l]).closed){if(2===r.opened)return P.biBacktrace(n,r);u=r.x,c=r.y,f=n.g+(u-n.x==0||c-n.y==0?1:x),(!r.opened||f<r.g)&&(r.g=f,r.h=r.h||S*v(k(u-i),k(c-a)),r.f=r.g+r.h,r.parent=n,r.opened?p.updateItem(r):(p.push(r),r.opened=1))}for((n=m.pop()).closed=!0,l=0,h=(o=s.getNeighbors(n,b)).length;l<h;++l)if(!(r=o[l]).closed){if(1===r.opened)return P.biBacktrace(r,n);u=r.x,c=r.y,f=n.g+(u-n.x==0||c-n.y==0?1:x),(!r.opened||f<r.g)&&(r.g=f,r.h=r.h||S*v(k(u-e),k(c-t)),r.f=r.g+r.h,r.parent=n,r.opened?m.updateItem(r):(m.push(r),r.opened=2))}}return[]},t.exports=n},{"../core/DiagonalMovement":5,"../core/Heuristic":7,"../core/Util":9,heap:1}],13:[function(e,t,i){var a=e("./BiAStarFinder");function s(e){a.call(this,e);var i=this.heuristic;this.heuristic=function(e,t){return 1e6*i(e,t)}}(s.prototype=new a).constructor=s,t.exports=s},{"./BiAStarFinder":12}],14:[function(e,t,i){var m=e("../core/Util"),a=e("../core/DiagonalMovement");function s(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never)}s.prototype.findPath=function(e,t,i,a,s){var n,o,r,l,h,u=s.getNodeAt(e,t),c=s.getNodeAt(i,a),f=[],d=[],p=this.diagonalMovement;for(f.push(u),u.opened=!0,u.by=0,d.push(c),c.opened=!0,c.by=1;f.length&&d.length;){for((r=f.shift()).closed=!0,l=0,h=(n=s.getNeighbors(r,p)).length;l<h;++l)if(!(o=n[l]).closed)if(o.opened){if(1===o.by)return m.biBacktrace(r,o)}else f.push(o),o.parent=r,o.opened=!0,o.by=0;for((r=d.shift()).closed=!0,l=0,h=(n=s.getNeighbors(r,p)).length;l<h;++l)if(!(o=n[l]).closed)if(o.opened){if(0===o.by)return m.biBacktrace(o,r)}else d.push(o),o.parent=r,o.opened=!0,o.by=1}return[]},t.exports=s},{"../core/DiagonalMovement":5,"../core/Util":9}],15:[function(e,t,i){var a=e("./BiAStarFinder");function s(e){a.call(this,e),this.heuristic=function(e,t){return 0}}(s.prototype=new a).constructor=s,t.exports=s},{"./BiAStarFinder":12}],16:[function(e,t,i){var p=e("../core/Util"),a=e("../core/DiagonalMovement");function s(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never)}s.prototype.findPath=function(e,t,i,a,s){var n,o,r,l,h,u=[],c=this.diagonalMovement,f=s.getNodeAt(e,t),d=s.getNodeAt(i,a);for(u.push(f),f.opened=!0;u.length;){if((r=u.shift()).closed=!0,r===d)return p.backtrace(d);for(l=0,h=(n=s.getNeighbors(r,c)).length;l<h;++l)(o=n[l]).closed||o.opened||(u.push(o),o.opened=!0,o.parent=r)}return[]},t.exports=s},{"../core/DiagonalMovement":5,"../core/Util":9}],17:[function(e,t,i){var a=e("./AStarFinder");function s(e){a.call(this,e),this.heuristic=function(e,t){return 0}}(s.prototype=new a).constructor=s,t.exports=s},{"./AStarFinder":10}],18:[function(e,t,i){e("../core/Util");var a=e("../core/Heuristic"),v=e("../core/Node"),s=e("../core/DiagonalMovement");function n(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||a.manhattan,this.weight=e.weight||1,this.trackRecursion=e.trackRecursion||!1,this.timeLimit=e.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never),this.diagonalMovement===s.Never?this.heuristic=e.heuristic||a.manhattan:this.heuristic=e.heuristic||a.octile}n.prototype.findPath=function(e,t,i,a,d){var s,n,o,p=(new Date).getTime(),m=function(e,t){return this.heuristic(Math.abs(t.x-e.x),Math.abs(t.y-e.y))}.bind(this),g=function(e,t,i,a,s){if(0,0<this.timeLimit&&(new Date).getTime()-p>1e3*this.timeLimit)return 1/0;var n,o,r,l,h=t+m(e,y)*this.weight;if(i<h)return h;if(e==y)return a[s]=[e.x,e.y],e;var u,c,f=d.getNeighbors(e,this.diagonalMovement);for(n=1/(r=0);l=f[r];++r){if(this.trackRecursion&&(l.retainCount=l.retainCount+1||1,!0!==l.tested&&(l.tested=!0)),(o=g(l,t+(c=l,(u=e).x===c.x||u.y===c.y?1:Math.SQRT2),i,a,s+1))instanceof v)return a[s]=[e.x,e.y],o;this.trackRecursion&&0==--l.retainCount&&(l.tested=!1),o<n&&(n=o)}return n}.bind(this),r=d.getNodeAt(e,t),y=d.getNodeAt(i,a),l=m(r,y);for(s=0;;++s){if((o=g(r,0,l,n=[],0))===1/0)return[];if(o instanceof v)return n;l=o}return[]},t.exports=n},{"../core/DiagonalMovement":5,"../core/Heuristic":7,"../core/Node":8,"../core/Util":9}],19:[function(e,t,i){var a=e("./JumpPointFinderBase"),p=e("../core/DiagonalMovement");function s(e){a.call(this,e)}((s.prototype=new a).constructor=s).prototype._jump=function(e,t,i,a){var s=this.grid,n=e-i,o=t-a;if(!s.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(e,t).tested=!0),s.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==n&&0!==o){if(s.isWalkableAt(e-n,t+o)&&!s.isWalkableAt(e-n,t)||s.isWalkableAt(e+n,t-o)&&!s.isWalkableAt(e,t-o))return[e,t];if(this._jump(e+n,t,e,t)||this._jump(e,t+o,e,t))return[e,t]}else if(0!==n){if(s.isWalkableAt(e+n,t+1)&&!s.isWalkableAt(e,t+1)||s.isWalkableAt(e+n,t-1)&&!s.isWalkableAt(e,t-1))return[e,t]}else if(s.isWalkableAt(e+1,t+o)&&!s.isWalkableAt(e+1,t)||s.isWalkableAt(e-1,t+o)&&!s.isWalkableAt(e-1,t))return[e,t];return this._jump(e+n,t+o,e,t)},s.prototype._findNeighbors=function(e){var t,i,a,s,n,o,r,l,h=e.parent,u=e.x,c=e.y,f=this.grid,d=[];if(h)t=h.x,i=h.y,a=(u-t)/Math.max(Math.abs(u-t),1),s=(c-i)/Math.max(Math.abs(c-i),1),0!==a&&0!==s?(f.isWalkableAt(u,c+s)&&d.push([u,c+s]),f.isWalkableAt(u+a,c)&&d.push([u+a,c]),f.isWalkableAt(u+a,c+s)&&d.push([u+a,c+s]),f.isWalkableAt(u-a,c)||d.push([u-a,c+s]),f.isWalkableAt(u,c-s)||d.push([u+a,c-s])):0===a?(f.isWalkableAt(u,c+s)&&d.push([u,c+s]),f.isWalkableAt(u+1,c)||d.push([u+1,c+s]),f.isWalkableAt(u-1,c)||d.push([u-1,c+s])):(f.isWalkableAt(u+a,c)&&d.push([u+a,c]),f.isWalkableAt(u,c+1)||d.push([u+a,c+1]),f.isWalkableAt(u,c-1)||d.push([u+a,c-1]));else for(r=0,l=(n=f.getNeighbors(e,p.Always)).length;r<l;++r)o=n[r],d.push([o.x,o.y]);return d},t.exports=s},{"../core/DiagonalMovement":5,"./JumpPointFinderBase":24}],20:[function(e,t,i){var a=e("./JumpPointFinderBase"),p=e("../core/DiagonalMovement");function s(e){a.call(this,e)}((s.prototype=new a).constructor=s).prototype._jump=function(e,t,i,a){var s=this.grid,n=e-i,o=t-a;if(!s.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(e,t).tested=!0),s.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==n&&0!==o){if(s.isWalkableAt(e-n,t+o)&&!s.isWalkableAt(e-n,t)||s.isWalkableAt(e+n,t-o)&&!s.isWalkableAt(e,t-o))return[e,t];if(this._jump(e+n,t,e,t)||this._jump(e,t+o,e,t))return[e,t]}else if(0!==n){if(s.isWalkableAt(e+n,t+1)&&!s.isWalkableAt(e,t+1)||s.isWalkableAt(e+n,t-1)&&!s.isWalkableAt(e,t-1))return[e,t]}else if(s.isWalkableAt(e+1,t+o)&&!s.isWalkableAt(e+1,t)||s.isWalkableAt(e-1,t+o)&&!s.isWalkableAt(e-1,t))return[e,t];return s.isWalkableAt(e+n,t)||s.isWalkableAt(e,t+o)?this._jump(e+n,t+o,e,t):null},s.prototype._findNeighbors=function(e){var t,i,a,s,n,o,r,l,h=e.parent,u=e.x,c=e.y,f=this.grid,d=[];if(h)t=h.x,i=h.y,a=(u-t)/Math.max(Math.abs(u-t),1),s=(c-i)/Math.max(Math.abs(c-i),1),0!==a&&0!==s?(f.isWalkableAt(u,c+s)&&d.push([u,c+s]),f.isWalkableAt(u+a,c)&&d.push([u+a,c]),(f.isWalkableAt(u,c+s)||f.isWalkableAt(u+a,c))&&d.push([u+a,c+s]),!f.isWalkableAt(u-a,c)&&f.isWalkableAt(u,c+s)&&d.push([u-a,c+s]),!f.isWalkableAt(u,c-s)&&f.isWalkableAt(u+a,c)&&d.push([u+a,c-s])):0===a?f.isWalkableAt(u,c+s)&&(d.push([u,c+s]),f.isWalkableAt(u+1,c)||d.push([u+1,c+s]),f.isWalkableAt(u-1,c)||d.push([u-1,c+s])):f.isWalkableAt(u+a,c)&&(d.push([u+a,c]),f.isWalkableAt(u,c+1)||d.push([u+a,c+1]),f.isWalkableAt(u,c-1)||d.push([u+a,c-1]));else for(r=0,l=(n=f.getNeighbors(e,p.IfAtMostOneObstacle)).length;r<l;++r)o=n[r],d.push([o.x,o.y]);return d},t.exports=s},{"../core/DiagonalMovement":5,"./JumpPointFinderBase":24}],21:[function(e,t,i){var a=e("./JumpPointFinderBase"),b=e("../core/DiagonalMovement");function s(e){a.call(this,e)}((s.prototype=new a).constructor=s).prototype._jump=function(e,t,i,a){var s=this.grid,n=e-i,o=t-a;if(!s.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(e,t).tested=!0),s.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==n&&0!==o){if(this._jump(e+n,t,e,t)||this._jump(e,t+o,e,t))return[e,t]}else if(0!==n){if(s.isWalkableAt(e,t-1)&&!s.isWalkableAt(e-n,t-1)||s.isWalkableAt(e,t+1)&&!s.isWalkableAt(e-n,t+1))return[e,t]}else if(0!==o&&(s.isWalkableAt(e-1,t)&&!s.isWalkableAt(e-1,t-o)||s.isWalkableAt(e+1,t)&&!s.isWalkableAt(e+1,t-o)))return[e,t];return s.isWalkableAt(e+n,t)&&s.isWalkableAt(e,t+o)?this._jump(e+n,t+o,e,t):null},s.prototype._findNeighbors=function(e){var t,i,a,s,n,o,r,l,h,u=e.parent,c=e.x,f=e.y,d=this.grid,p=[];if(u){if(t=u.x,i=u.y,a=(c-t)/Math.max(Math.abs(c-t),1),s=(f-i)/Math.max(Math.abs(f-i),1),0!==a&&0!==s)d.isWalkableAt(c,f+s)&&p.push([c,f+s]),d.isWalkableAt(c+a,f)&&p.push([c+a,f]),d.isWalkableAt(c,f+s)&&d.isWalkableAt(c+a,f)&&p.push([c+a,f+s]);else if(0!==a){h=d.isWalkableAt(c+a,f);var m=d.isWalkableAt(c,f+1),g=d.isWalkableAt(c,f-1);h&&(p.push([c+a,f]),m&&p.push([c+a,f+1]),g&&p.push([c+a,f-1])),m&&p.push([c,f+1]),g&&p.push([c,f-1])}else if(0!==s){h=d.isWalkableAt(c,f+s);var y=d.isWalkableAt(c+1,f),v=d.isWalkableAt(c-1,f);h&&(p.push([c,f+s]),y&&p.push([c+1,f+s]),v&&p.push([c-1,f+s])),y&&p.push([c+1,f]),v&&p.push([c-1,f])}}else for(r=0,l=(n=d.getNeighbors(e,b.OnlyWhenNoObstacles)).length;r<l;++r)o=n[r],p.push([o.x,o.y]);return p},t.exports=s},{"../core/DiagonalMovement":5,"./JumpPointFinderBase":24}],22:[function(e,t,i){var a=e("./JumpPointFinderBase"),p=e("../core/DiagonalMovement");function s(e){a.call(this,e)}((s.prototype=new a).constructor=s).prototype._jump=function(e,t,i,a){var s=this.grid,n=e-i,o=t-a;if(!s.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(e,t).tested=!0),s.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==n){if(s.isWalkableAt(e,t-1)&&!s.isWalkableAt(e-n,t-1)||s.isWalkableAt(e,t+1)&&!s.isWalkableAt(e-n,t+1))return[e,t]}else{if(0===o)throw new Error("Only horizontal and vertical movements are allowed");if(s.isWalkableAt(e-1,t)&&!s.isWalkableAt(e-1,t-o)||s.isWalkableAt(e+1,t)&&!s.isWalkableAt(e+1,t-o))return[e,t];if(this._jump(e+1,t,e,t)||this._jump(e-1,t,e,t))return[e,t]}return this._jump(e+n,t+o,e,t)},s.prototype._findNeighbors=function(e){var t,i,a,s,n,o,r,l,h=e.parent,u=e.x,c=e.y,f=this.grid,d=[];if(h)t=h.x,i=h.y,a=(u-t)/Math.max(Math.abs(u-t),1),s=(c-i)/Math.max(Math.abs(c-i),1),0!==a?(f.isWalkableAt(u,c-1)&&d.push([u,c-1]),f.isWalkableAt(u,c+1)&&d.push([u,c+1]),f.isWalkableAt(u+a,c)&&d.push([u+a,c])):0!==s&&(f.isWalkableAt(u-1,c)&&d.push([u-1,c]),f.isWalkableAt(u+1,c)&&d.push([u+1,c]),f.isWalkableAt(u,c+s)&&d.push([u,c+s]));else for(r=0,l=(n=f.getNeighbors(e,p.Never)).length;r<l;++r)o=n[r],d.push([o.x,o.y]);return d},t.exports=s},{"../core/DiagonalMovement":5,"./JumpPointFinderBase":24}],23:[function(e,t,i){var a=e("../core/DiagonalMovement"),s=e("./JPFNeverMoveDiagonally"),n=e("./JPFAlwaysMoveDiagonally"),o=e("./JPFMoveDiagonallyIfNoObstacles"),r=e("./JPFMoveDiagonallyIfAtMostOneObstacle");t.exports=function(e){return(e=e||{}).diagonalMovement===a.Never?new s(e):e.diagonalMovement===a.Always?new n(e):e.diagonalMovement===a.OnlyWhenNoObstacles?new o(e):new r(e)}},{"../core/DiagonalMovement":5,"./JPFAlwaysMoveDiagonally":19,"./JPFMoveDiagonallyIfAtMostOneObstacle":20,"./JPFMoveDiagonallyIfNoObstacles":21,"./JPFNeverMoveDiagonally":22}],24:[function(e,t,i){var h=e("heap"),u=e("../core/Util"),b=e("../core/Heuristic");e("../core/DiagonalMovement");function a(e){e=e||{},this.heuristic=e.heuristic||b.manhattan,this.trackJumpRecursion=e.trackJumpRecursion||!1}a.prototype.findPath=function(e,t,i,a,s){var n,o=this.openList=new h(function(e,t){return e.f-t.f}),r=this.startNode=s.getNodeAt(e,t),l=this.endNode=s.getNodeAt(i,a);for(this.grid=s,r.g=0,r.f=0,o.push(r),r.opened=!0;!o.empty();){if((n=o.pop()).closed=!0,n===l)return u.expandPath(u.backtrace(l));this._identifySuccessors(n)}return[]},a.prototype._identifySuccessors=function(e){var t,i,a,s,n,o,r,l,h,u,c=this.grid,f=this.heuristic,d=this.openList,p=this.endNode.x,m=this.endNode.y,g=e.x,y=e.y,v=Math.abs;Math.max;for(s=0,n=(t=this._findNeighbors(e)).length;s<n;++s)if(i=t[s],a=this._jump(i[0],i[1],g,y)){if(o=a[0],r=a[1],(u=c.getNodeAt(o,r)).closed)continue;l=b.octile(v(o-g),v(r-y)),h=e.g+l,(!u.opened||h<u.g)&&(u.g=h,u.h=u.h||f(v(o-p),v(r-m)),u.f=u.g+u.h,u.parent=e,u.opened?d.updateItem(u):(d.push(u),u.opened=!0))}},t.exports=a},{"../core/DiagonalMovement":5,"../core/Heuristic":7,"../core/Util":9,heap:1}],25:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.exitState=e)}return a(t,[{key:"enter",value:function(e){e.animations.stop(),e.frame=0,e.data={};var t=e.data;t.timers={},t.cx=e.x,t.cy=e.y,t.timers.moveTimer=e.game.time.now+100,t.timers.explodeTimer=e.game.time.now+2e3}},{key:"update",value:function(e){var t=e.data;t.timers.moveTimer<e.game.time.now&&(e.x=t.cx+e.game.rnd.integerInRange(-5,5),e.y=t.cy+e.game.rnd.integerInRange(-5,5),t.timers.moveTimer=e.game.time.now+100),t.timers.explodeTimer<e.game.time.now&&(e.state.shrapnelGroup.detonate(e.x+e.game.global.pw/2,e.y+e.game.global.ph/2,e.tint),e.state.explodeSfx.play(),e.state.exploder.explode(e.x+e.width/2,e.y+e.width/2,e.tint),e.data={},e.kill())}},{key:"exit",value:function(e){e.data={}}}]),t}();i.default=s},{}],26:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.exitState=e)}return a(t,[{key:"enter",value:function(e){e.data.avoidData={};var t=e.data.avoidData;t.speed=1.5,t.moveState=0,t.moveDirection=Phaser.NONE,t.moveCount=0,t.moveMax=5,t.target=e.state.player}},{key:"getMoveDirection",value:function(e){var t=e.state.grid,i=e.state.game.global,a=e.x/i.tileSize,s=e.y/i.tileSize,n=e.data.avoidData;this.checkSides(t,a,s,n),n.moveDirection=Phaser.NONE,n.cost=0,n.left&&this.setDirectionByCost(e,{x:-24,y:0},Phaser.LEFT),n.right&&this.setDirectionByCost(e,{x:24,y:0},Phaser.RIGHT),n.up&&this.setDirectionByCost(e,{x:0,y:-24},Phaser.UP),n.down&&this.setDirectionByCost(e,{x:0,y:24},Phaser.DOWN)}},{key:"setDirectionByCost",value:function(e,t,i){var a=e.data.avoidData,s=Math.abs(e.game.physics.arcade.distanceToXY(a.target,e.x+t.x,e.y+t.y));s>a.cost&&(a.cost=s,a.moveDirection=i)}},{key:"checkSides",value:function(e,t,i,a){a.left=e.isFree(t-1,i)&&e.isFree(t-1,i+1),a.right=e.isFree(t+2,i)&&e.isFree(t+2,i+1),a.up=e.isFree(t,i-1)&&e.isFree(t+1,i-1),a.down=e.isFree(t,i+2)&&e.isFree(t+1,i+2)}},{key:"checkFree",value:function(e,t){var i=e.state.grid,a=e.state.game.global,s=e.x/a.tileSize,n=e.y/a.tileSize;switch(this.checkSides(i,s,n,t),t.moveDirection){case Phaser.LEFT:t.left&&(t.moveState=1);break;case Phaser.RIGHT:t.right&&(t.moveState=1);break;case Phaser.UP:t.up&&(t.moveState=1);break;case Phaser.DOWN:t.down&&(t.moveState=1)}1!=t.moveState&&(t.moveState=0)}},{key:"setAnimation",value:function(e,t){t.animations.getAnimation(e).isPlaying||t.animations.play(e)}},{key:"fire",value:function(e){for(var t=e.state.player,i=e.state.grid,a=0;a<e.state.seekerShots.length;a++){var s=e.state.seekerShots[a];if(!s.isFiring()){s.fire(i.screenToGrid(e.x),i.screenToGrid(e.y),i.screenToGrid(t.x),i.screenToGrid(t.y));break}}}},{key:"update",value:function(e){var t=e.data.avoidData,i=e.state.game.global;if(0==t.moveState&&(this.getMoveDirection(e),t.moveState=1),1==t.moveState)switch(t.moveState=2,t.moveDirection){case Phaser.RIGHT:this.setAnimation("right",e),t.tX=Math.floor(e.x+i.tileSize);break;case Phaser.LEFT:this.setAnimation("left",e),t.tX=Math.floor(e.x-i.tileSize);break;case Phaser.DOWN:this.setAnimation("down",e),t.tY=Math.floor(e.y+i.tileSize);break;case Phaser.UP:this.setAnimation("up",e),t.tY=Math.floor(e.y-i.tileSize)}if(2==t.moveState)switch(t.moveDirection){case Phaser.RIGHT:e.x=e.x+t.speed,e.x>=t.tX&&(e.x=Math.floor(t.tX),t.moveState=3,t.moveCount++);break;case Phaser.LEFT:e.x=e.x-t.speed,e.x<=t.tX&&(e.x=Math.floor(t.tX),t.moveState=3,t.moveCount++);break;case Phaser.UP:e.y=e.y-t.speed,e.y<=t.tY&&(e.y=Math.floor(t.tY),t.moveState=3,t.moveCount++);break;case Phaser.DOWN:e.y=e.y+t.speed,e.y>=t.tY&&(e.y=Math.floor(t.tY),t.moveState=3,t.moveCount++)}3==t.moveState&&t.moveCount==t.moveMax?(t.moveState=0,t.moveCount=0,t.target=e.state.grid.corners[e.game.rnd.integerInRange(0,e.state.grid.corners.length-1)],Phaser.Utils.chanceRoll(20)&&this.fire(e)):3==t.moveState&&(t.moveState=0)}},{key:"exit",value:function(e){e.data.avoidData={}}}]),t}();i.default=s},{}],27:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,s=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(e("../classes/const.js")),o=e("../classes/pickup.js"),r=(a=o)&&a.__esModule?a:{default:a};var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return s(e,null,[{key:"checkPlayerDeath",value:function(){for(var e=[this.enemyShotWeapon.bullets,this.shrapnelGroup,this.bounceShotGroup],t=0;t<this.seekerShots.length;t++)e.push(this.seekerShots[t]);for(var i=0;i<e.length;i++)e[i]&&this.game.physics.arcade.overlap(this.player,e[i],function(e,t){t.kill(),0==this.game.global.armour?this.playerDeath():e.flashTimer||(e.saveTint=e.tint,e.tint=6750054,this.game.sound.stopAll(),this.playerHitSfx.play(),this.game.global.armour--,this.gui.showArmour(),e.flashTimer=this.game.time.events.add(100,function(){e.tint=e.saveTint,this.game.time.events.remove(e.flashTimer),e.flashTimer=null},this,e))},null,this);for(var a=[this.enemyRobots,this.motherBots],s=0;s<a.length;s++)a[s]&&this.game.physics.arcade.overlap(this.player,a[s],function(e,t){t.kill(),this.playerDeath()},null,this)}},{key:"checkChipCollision",value:function(){this.game.physics.arcade.overlap(this.player,this.chips,function(e,t){r.default.decodeChip.call(this,t),t.kill()},null,this)}},{key:"checkShotBrickCollision",value:function(){this.game.physics.arcade.overlap(this.player.weapon.bullets,this.brickGroup,function(e,t){var i=this.game.global;e.kill();var a=Math.round(t.x/i.tileSize),s=Math.round(t.y/i.tileSize);this.grid.setCell(a,s,0),this.smallExploder.explode(t.x+t.width/2,t.y+t.height/2,t.tint,1),t.kill()},null,this)}},{key:"checkTeleporterCollision",value:function(){this.game.physics.arcade.overlap(this.teleporters,this.enemyRobots,function(e,t){e.flash();var i=[],a=this.teleporters.getRandom(),s=this.grid.screenToGrid(a.x),n=this.grid.screenToGrid(a.y);s-=1,n-=1,console.log(s,n),this.grid.isFreeBlock(s+2,n,2)&&i.push([s+2,n]),this.grid.isFreeBlock(s,n+2,2)&&i.push([s,n+2]),this.grid.isFreeBlock(s-2,n,2)&&i.push([s-2,n]),this.grid.isFreeBlock(s,n-2,2)&&i.push([s,n-2]);var o=null;o=1==i.length?i[0]:i[this.game.rnd.integerInRange(0,i.length-1)];var r=t.health;t.kill();var l=this.portalAnims.getFirstDead();l&&(l.reset((o[0]+1)*this.tileSize,(o[1]+1)*this.tileSize),l.play("flash")),t.reset(o[0]*this.tileSize,o[1]*this.tileSize,r),t.fsm.changeState(t.fsm.stateStack[1]),this.teleportSfx.isPlaying||this.teleportSfx.play()},null,this)}},{key:"checkGeneratorCollision",value:function(){this.game.physics.arcade.overlap(this.flashGroup,this.generators,function(e,t){t.health=t.health-1,0<t.health?this.damageSfx.play():(this.grid.clearBlock(t.x,t.y),t.kill(),this.scoreTable.generatorScore(t.frame),this.explodeSfx.isPlaying||this.explodeSfx.play(),this.exploder.explode(t.x,t.y,16777215,2))},null,this),this.game.physics.arcade.overlap(this.player.weapon.bullets,this.generators,function(e,t){e.kill(),t.health=t.health-1,0<t.health?this.damageSfx.play():(this.grid.clearBlock(t.x,t.y),t.kill(),this.explodeSfx.isPlaying||this.explodeSfx.play(),this.exploder.explode(t.x,t.y,16777215,2),this.scoreTable.generatorScore(t.frame),Phaser.Utils.chanceRoll(80)&&r.default.decodeChip.call(this,{type:this.game.rnd.integerInRange(1,11),x:t.x,y:t.y}))},null,this)}},{key:"checkMineRobotCollision",value:function(){this.game.physics.arcade.overlap(this.mines,this.enemyRobots,function(e,t){t.type!=n.PLAYER&&e.explode()},null,this),this.game.physics.arcade.overlap(this.flashGroup,this.enemyRobots,function(e,t){if(t.type!=n.PLAYER){if(3e3==t.health)return this.damageSfx.play(),void(t.health=1);t.health=t.health-1,0<t.health?this.damageSfx.play():(this.scoreTable.robotScore(t.tint),t.kill(),this.explodeSfx.isPlaying||this.explodeSfx.play(),this.exploder.explode(t.x+t.width/2,t.y+t.width/2,t.tint))}},null,this)}},{key:"checkShotRobotCollision",value:function(){this.game.physics.arcade.overlap(this.player.weapon.bullets,this.enemyRobots,function(e,t){e.kill(),t.type==n.SPEEDBOT&&t.data.speedData&&(t.data.speedData.speed+=1,0<t.health&&!this.speedupSfx.isPlaying&&this.speedupSfx.play()),3e3!=t.health?(t.health=t.health-1,0<t.health?this.damageSfx.play():(this.scoreTable.robotScore(t.tint),t.kill(),this.explodeSfx.play(),this.exploder.explode(t.x+t.width/2,t.y+t.width/2,t.tint))):this.invincibleSfx.play()},null,this)}},{key:"checkEnemyShotWallCollision",value:function(){this.game.physics.arcade.overlap(this.enemyShotWeapon.bullets,this.wallsGroup,function(e,t){e.kill()},null,this)}},{key:"checkEnemyShotBrickCollision",value:function(){this.game.physics.arcade.overlap(this.enemyShotWeapon.bullets,this.brickGroup,function(e,t){var i=this.game.global;e.kill();var a=Math.round(t.x/i.tileSize),s=Math.round(t.y/i.tileSize);this.grid.setCell(a,s,0),this.smallExploder.explode(t.x+t.width/2,t.y+t.height/2,t.tint,1),t.kill()},null,this)}},{key:"checkShotWallCollision",value:function(){this.game.physics.arcade.overlap(this.player.weapon.bullets,this.wallsGroup,function(e,t){e.kill()},null,this)}},{key:"checkExitCollision",value:function(){if(0!=this.exitSprite.visible){var e=this.game.math;1==this.exitSprite.frame&&this.game.physics.arcade.overlap(this.player,this.exitSprite)&&(this.exitSprite.frame=2,Phaser.Utils.chanceRoll(50)&&this.run_like_a_chickenSfx.play()),2==this.exitSprite.frame&&e.fuzzyEqual(this.exitSprite.x,this.player.x,10)&&e.fuzzyEqual(this.exitSprite.y,this.player.y,10)&&this.game.state.start("nextRoom")}}},{key:"checkMotherBotCollision",value:function(){this.game.physics.arcade.overlap(this.player.weapon.bullets,this.motherBots,function(e,t){if(e.kill(),t.health=t.health-1,0<t.health)return this.damageSfx.play(),void t.playHitAnimation();t.die()},null,this)}}]),e}();i.default=l},{"../classes/const.js":44,"../classes/pickup.js":48}],28:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.exitState=e)}return a(t,[{key:"enter",value:function(e){e.data.dummyData={};var t=e.data.dummyData;t.speed=1,t.moveState=0,t.moveDirection=Phaser.NONE,t.moveCount=0,t.moveMax=10}},{key:"getMoveDirection",value:function(e){var t=e.state.grid,i=e.state.game.global,a=e.x/i.tileSize,s=e.y/i.tileSize,n=e.data.dummyData;this.checkSides(t,a,s,n);var o=[];n.left&&o.push(Phaser.LEFT),n.right&&o.push(Phaser.RIGHT),n.up&&o.push(Phaser.UP),n.down&&o.push(Phaser.DOWN),n.moveDirection=o[e.game.rnd.integerInRange(0,o.length-1)]}},{key:"checkSides",value:function(e,t,i,a){a.left=e.isFree(t-1,i)&&e.isFree(t-1,i+1),a.right=e.isFree(t+2,i)&&e.isFree(t+2,i+1),a.up=e.isFree(t,i-1)&&e.isFree(t+1,i-1),a.down=e.isFree(t,i+2)&&e.isFree(t+1,i+2)}},{key:"checkFree",value:function(e,t){var i=e.state.grid,a=e.state.game.global,s=e.x/a.tileSize,n=e.y/a.tileSize;switch(this.checkSides(i,s,n,t),t.moveDirection){case Phaser.LEFT:t.left&&(t.moveState=1);break;case Phaser.RIGHT:t.right&&(t.moveState=1);break;case Phaser.UP:t.up&&(t.moveState=1);break;case Phaser.DOWN:t.down&&(t.moveState=1)}1!=t.moveState&&(t.moveState=0)}},{key:"setAnimation",value:function(e,t){t.animations.getAnimation(e).isPlaying||t.animations.play(e)}},{key:"update",value:function(e){var t=e.data.dummyData,i=e.state.game.global;if(0==t.moveState&&(this.getMoveDirection(e),t.moveState=1),1==t.moveState)switch(t.moveState=2,t.moveDirection){case Phaser.RIGHT:this.setAnimation("right",e),t.tX=Math.floor(e.x+i.tileSize);break;case Phaser.LEFT:this.setAnimation("left",e),t.tX=Math.floor(e.x-i.tileSize);break;case Phaser.DOWN:this.setAnimation("down",e),t.tY=Math.floor(e.y+i.tileSize);break;case Phaser.UP:this.setAnimation("up",e),t.tY=Math.floor(e.y-i.tileSize)}if(2==t.moveState)switch(t.moveDirection){case Phaser.RIGHT:e.x=e.x+t.speed,e.x>=t.tX&&(e.x=Math.floor(t.tX),t.moveState=3,t.moveCount++);break;case Phaser.LEFT:e.x=e.x-t.speed,e.x<=t.tX&&(e.x=Math.floor(t.tX),t.moveState=3,t.moveCount++);break;case Phaser.UP:e.y=e.y-t.speed,e.y<=t.tY&&(e.y=Math.floor(t.tY),t.moveState=3,t.moveCount++);break;case Phaser.DOWN:e.y=e.y+t.speed,e.y>=t.tY&&(e.y=Math.floor(t.tY),t.moveState=3,t.moveCount++)}3==t.moveState&&t.moveCount==t.moveMax?(t.moveState=4,e.animations.stop(),e.frame=0,this.exitState?e.fsm.changeState(e.fsm.stateStack[this.exitState]):e.fsm.changeState(e.fsm.stateStack[2])):3==t.moveState&&this.checkFree(e,t)}},{key:"exit",value:function(e){e.data.dummyData={}}}]),t}();i.default=s},{}],29:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.exitState=e)}return a(t,[{key:"enter",value:function(e){e.data.fireData={},this.fire(e),this.exitState?e.fsm.changeState(e.fsm.stateStack[this.exitState]):e.fsm.changeState(e.fsm.stateStack[1])}},{key:"fire",value:function(e){if(Phaser.Utils.chanceRoll(50)){var t=[Phaser.ANGLE_RIGHT,Phaser.ANGLE_LEFT,Phaser.ANGLE_UP,Phaser.ANGLE_DOWN];e.state.enemyShotWeapon.fireAngle=t[e.game.rnd.integerInRange(0,3)];var i=new Phaser.Point(e.x+e.game.global.tileSize,e.y+e.game.global.tileSize),a=e.state.enemyShotWeapon.fire(i);a&&(a.tint=e.tint,e.state.botshotSfx.play())}}},{key:"update",value:function(e){e.data.fireData,e.state.game.global}},{key:"exit",value:function(e){e.data.fireData={}}}]),t}();i.default=s},{}],30:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.owner=e,this.previousState=null,this.currentState=null,this.stateStack=null}return a(t,[{key:"setState",value:function(e){this.currentState=e,this.currentState.enter(this.owner)}},{key:"clearStates",value:function(){this.currentState&&this.currentState.exit(this.owner),this.currentState=null,this.previousState=null}},{key:"changeState",value:function(e){e&&(this.previousState=this.currentState,this.previousState.exit&&this.previousState.exit(this.owner),this.currentState=e,this.currentState.enter(this.owner))}},{key:"update",value:function(){null!=this.currentState&&this.currentState.update(this.owner)}}]),t}();i.default=s},{}],31:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),s=e("../classes/Level.js");(a=s)&&a.__esModule;var o=e("pathfinding"),r=function(){function s(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.state=t,this.game=t.game,this.name="Grid",this.global=t.game.global;var i=this.global.pw/2-1,a=this.global.ph/2-1;this.quadrants=[new Phaser.Rectangle(1,1,i,a),new Phaser.Rectangle(1,a,i,a),new Phaser.Rectangle(i,1,i,a),new Phaser.Rectangle(i,a,i,a)],this.buildMaze(),this.buildPathFindingGrid(),this.buildExit(),this.buildEntry(),this.getCorners(),this.applyRules()}return n(s,[{key:"clearWallSprite",value:function(e,t){this.state.wallsGroup.forEachAlive(function(e,t,i){e.x==t&&e.y==i&&e.kill()},this,e,t)}},{key:"buildPathFindingGrid",value:function(){this.pfGrid=new o.Grid(this.global.pw,this.global.ph);var e=0;for(e=0;e<this.global.ph;e++){var t=0;for(t=0;t<this.global.pw;t++)this.pfGrid.setWalkableAt(t,e,this.isFree(t,e))}this.finder=new o.AStarFinder}},{key:"applyRules",value:function(){if(this.level.rules){var e=this.level.rules;(e.clear_room||e.get_chips)&&(this.state.exitSprite.visible=!1),e.respawn&&(this.game.global.respawnCount=1)}}},{key:"buildMaze",value:function(){var e=this.game.global;this.level=JSON.parse(JSON.stringify(this.game.cache.getJSON("r"+e.currentMap))),this.state.rules=this.level.rules,this.grid=JSON.parse(JSON.stringify(this.game.cache.getJSON(this.level.map)));var t=0,i=9;for(t=0;t<e.ph;t++)for(i=0;i<e.pw;i++)switch(this.grid[t][i]){case 1:this.buildWall(i,t);break;case 2:this.buildBrick(i,t)}}},{key:"buildBrick",value:function(e,t){var i=this.game.add.sprite(e*this.game.global.tileSize+2,t*this.game.global.tileSize+2,"wall",0);i.tint=10066329,i.width=this.game.global.tileSize-2,i.height=this.game.global.tileSize-2,this.game.physics.enable(i,Phaser.Physics.ARCADE),i.body.syncBounds=!0,i.body.immoveable=!0,this.state.brickGroup.add(i)}},{key:"buildWall",value:function(e,t){var i=this.game.add.sprite(e*this.game.global.tileSize,t*this.game.global.tileSize,"wall",0);i.tint=this.game.global.mazePalette[this.game.global.mazeIndex],this.game.physics.enable(i,Phaser.Physics.ARCADE),i.body.immoveable=!0,this.state.wallsGroup.add(i)}},{key:"getCorners",value:function(){var e=void 0,t=void 0,i=void 0,a=void 0,s=0;for(s=0;s<this.state.wallsGroup.count();s++){var n=this.state.wallsGroup.getAt(s);0==n.x&&0==n.y&&(e=n),n.x==(this.global.pw-1)*this.global.tileSize&&0==n.y&&(t=n),n.x==(this.global.pw-1)*this.global.tileSize&&n.y==(this.global.ph-1)*this.global.tileSize&&(i=n),0==n.x&&n.y==(this.global.ph-1)*this.global.tileSize&&(a=n)}this.corners=[e,t,i,a,this.state.entrySprite,this.state.exitSprite]}},{key:"buildExit",value:function(){var e=this.game.global;if(this.state.exitSprite=this.game.add.sprite(0,0,"exit",1),"string"==typeof this.level.exit){if("random"==this.level.exit){var t=this.getFreeSpace();this.state.exitSprite.x=t.x*e.tileSize,this.state.exitSprite.y=t.y*e.tileSize}}else this.state.exitSprite.x=this.level.exit[0]*e.tileSize,this.state.exitSprite.y=this.level.exit[1]*e.tileSize;this.game.physics.enable(this.state.exitSprite,Phaser.Physics.ARCADE)}},{key:"buildEntry",value:function(){var e=this.game.global;if(this.state.entrySprite=this.game.add.sprite(0,0,"exit",0),"string"==typeof this.level.entry){if("random"==this.level.entry){var t=0;for(e.pw;t<500;){var i=this.getFreeSpace();this.state.entrySprite.x=i.x*e.tileSize,this.state.entrySprite.y=i.y*e.tileSize,t=this.game.physics.arcade.distanceBetween(this.state.entrySprite,this.state.exitSprite)}}}else this.state.entrySprite.x=this.level.entry[0]*e.tileSize,this.state.entrySprite.y=this.level.entry[1]*e.tileSize}},{key:"isFree",value:function(e,t){var i=this.game.global;return!isNaN(e)&&(!isNaN(t)&&(!(e<0||e>=i.pw)&&(!(t<0||t>=i.ph)&&0==this.grid[t][e])))}},{key:"getCellVal",value:function(e,t){var i=this.game.global;return e<0||e>=i.pw?1:t<0||t>=i.ph?1:this.grid[t][e]}},{key:"setCell",value:function(e,t,i){if(!isNaN(i)){var a=this.game.global;e<0||e>=a.pw||t<0||t>=a.ph||(this.grid[t][e]=i)}}},{key:"screenToGrid",value:function(e){return e=Math.round(e/this.game.global.tileSize)}},{key:"clearBlock",value:function(e,t){e=this.screenToGrid(e),t=this.screenToGrid(t),e-=1,t-=1,this.setCell(e,t,0),this.setCell(e+1,t,0),this.setCell(e,t+1,0),this.setCell(e+1,t+1,0)}},{key:"isFreeBlock",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2,a=!0,s=(this.game.global,0),n=0;for(s=t;s<t+i;s++)for(n=e;n<e+i;n++)if(!this.isFree(n,s)){a=!1;break}return a}},{key:"dump",value:function(){var e=0,t=0;for(e=0;e<this.game.global.ph;e++){var i="";for(t=0;t<this.game.global.pw;t++)i+=this.grid[e][t];console.log(i)}throw"grid dumped"}},{key:"getFreeSpace",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:2,t=!1,i=0;for(i=0;i<4&&0==(t=this.selectPositionFromQuadrant(e));i++);return t}},{key:"selectPositionFromQuadrant",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:2,t=this.quadrants[this.game.rnd.integerInRange(0,this.quadrants.length-1)].random();t.x=Math.floor(t.x),t.y=Math.floor(t.y);var i=t,a=0,s=0;for(a=0;a<e;a++)for(s=0;s<e;s++)if(!this.isFree(t.x+s,t.y+a)){i=!1;break}return i}}]),s}();i.default=r},{"../classes/Level.js":34,pathfinding:3}],32:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);t.global;this.game=t,this.state=e,this.scoreGui=document.getElementById("score"),this.livesGui=document.getElementById("lives"),this.minesGui=document.getElementById("mines"),this.livesLabel=document.getElementById("livesLabel"),this.scoreLabel=document.getElementById("scoreLabel"),this.minesLabel=document.getElementById("minesLabel"),this.instructions=document.getElementById("instructions"),this.armourLabel=document.getElementById("armourLabel"),this.armour=document.getElementById("armour"),this.mute=document.getElementById("mute"),this.godMode=document.getElementById("godMode"),this.livesGui.innerText=this.game.global.lives,this.scoreGui.innerText=this.game.global.score,this.minesGui.innerText=this.game.global.mines,this.incScore(0)}return a(i,[{key:"showGui",value:function(){this.scoreGui.style.visibility="visible",this.livesGui.style.visibility="visible",this.livesLabel.style.visibility="visible",this.scoreLabel.style.visibility="visible",this.minesGui.style.visibility="visible",this.minesLabel.style.visibility="visible",this.instructions.style.visibility="visible",this.mute.style.visiblity="visible",this.armourLabel.style.visibility="visible",this.armour.style.visibility="visible",this.godMode.style.visibility="visible"}},{key:"hideGui",value:function(){this.scoreGui.style.visibility="hidden",this.livesGui.style.visibility="hidden",this.livesLabel.style.visibility="hidden",this.scoreLabel.style.visibility="hidden",this.minesGui.style.visibility="hidden",this.minesLabel.style.visibility="hidden",this.instructions.style.visibility="hidden",this.mute.style.visibility="hidden",this.armourLabel.style.visibility="hidden",this.armour.style.visibility="hidden",this.godMode.style.visibility="hidden"}},{key:"showGodMode",value:function(){this.game.global.godMode?this.godMode.style.visibility="visible":this.godMode.style.visibility="hidden"}},{key:"showMute",value:function(){this.game.global.mute?this.mute.style.visibility="visible":this.mute.style.visibility="hidden"}},{key:"showLives",value:function(){this.livesGui.innerText=this.game.global.lives}},{key:"incScore",value:function(e){this.game.global.score+=e;for(var t=this.game.global.score+"";t.length<6;)t="0"+t;this.scoreGui.innerText=t,this.game.global.score%1e4==0&&this.game.global.armour<3&&(this.game.global.amour=3,this.showArmour()),this.game.global.score%2e4==0&&(this.game.global.lives++,this.showLives())}},{key:"showMines",value:function(){this.minesGui.innerText=this.game.global.mines}},{key:"showArmour",value:function(){this.armour.innerText=this.game.global.armour}},{key:"update",value:function(){}},{key:"setInstructions",value:function(){var e=this.state.rules;e.clear_room&&(this.instructions.innerText="KILL ALL ENEMIES"),e.get_chips&&(this.instructions.innerText="RETRIEVE ALL UPGRADE BOXES"),e.get_to_exit&&(this.instructions.innerText="GET TO THE EXIT")}}]),i}();i.default=s},{}],33:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.exitState=e)}return a(t,[{key:"enter",value:function(e){e.data.huntData={};var t=e.data.huntData;t.speed=1.1,t.moveState=0,t.moveDirection=Phaser.NONE,t.moveCount=0,t.moveMax=e.game.rnd.integerInRange(7,13)}},{key:"getDirections",value:function(e){var t=e.state.grid,i=e.state.game.global,a=e.x/i.tileSize,s=e.y/i.tileSize,n=e.data.huntData,o=e.state.player;this.checkSides(t,a,s,n),n.moveDirection=Phaser.NONE,n.left&&e.state.grid.screenToGrid(e.x)>e.state.grid.screenToGrid(o.x)?n.moveDirection=Phaser.LEFT:n.right&&e.state.grid.screenToGrid(e.x)<e.state.grid.screenToGrid(o.x)&&(n.moveDirection=Phaser.RIGHT),n.up&&e.state.grid.screenToGrid(e.y)>e.state.grid.screenToGrid(o.y)?n.moveDirection=Phaser.UP:n.down&&e.state.grid.screenToGrid(e.y)<e.state.grid.screenToGrid(o.y)&&(n.moveDirection=Phaser.DOWN)}},{key:"checkSides",value:function(e,t,i,a){a.left=e.isFree(t-1,i)&&e.isFree(t-1,i+1),a.right=e.isFree(t+2,i)&&e.isFree(t+2,i+1),a.up=e.isFree(t,i-1)&&e.isFree(t+1,i-1),a.down=e.isFree(t,i+2)&&e.isFree(t+1,i+2)}},{key:"setAnimation",value:function(e,t){t.animations.getAnimation(e).isPlaying||t.animations.play(e)}},{key:"checkSpeedUp",value:function(e){e.game.physics.arcade.distanceBetween(e,e.state.player,!1,!0)<100&&(e.data.huntData.speed=3)}},{key:"update",value:function(e){var t=e.data.huntData,i=e.state.game.global;if(this.checkSpeedUp(e),0==t.moveState&&(this.getDirections(e),t.moveState=1),1==t.moveState)switch(t.moveState=2,t.moveDirection){case Phaser.RIGHT:this.setAnimation("right",e),t.tX=Math.floor(e.x+i.tileSize);break;case Phaser.LEFT:this.setAnimation("left",e),t.tX=Math.floor(e.x-i.tileSize);break;case Phaser.DOWN:this.setAnimation("down",e),t.tY=Math.floor(e.y+i.tileSize);break;case Phaser.UP:this.setAnimation("up",e),t.tY=Math.floor(e.y-i.tileSize);break;case Phaser.NONE:t.moveState=0}if(2==t.moveState)switch(t.moveDirection){case Phaser.RIGHT:e.x=e.x+t.speed,e.x>=t.tX&&(e.x=Math.floor(t.tX),t.moveState=3,t.moveCount++);break;case Phaser.LEFT:e.x=e.x-t.speed,e.x<=t.tX&&(e.x=Math.floor(t.tX),t.moveState=3,t.moveCount++);break;case Phaser.UP:e.y=e.y-t.speed,e.y<=t.tY&&(e.y=Math.floor(t.tY),t.moveState=3,t.moveCount++);break;case Phaser.DOWN:e.y=e.y+t.speed,e.y>=t.tY&&(e.y=Math.floor(t.tY),t.moveState=3,t.moveCount++)}t.moveDirection==Phaser.NONE||3==t.moveState&&t.moveCount==t.moveMax?(t.moveState=4,e.animations.stop(),e.frame=0,this.exitState?e.fsm.changeState[this.exitState]:e.fsm.changeState(e.fsm.stateStack[3])):3==t.moveState&&(t.moveState=0)}},{key:"exit",value:function(e){e.data.huntData={}}}]),t}();i.default=s},{}],34:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(e("../classes/const.js")),n=r(e("../prefabs/MotherBot.js")),o=r(e("../classes/motherbot/MWarpState.js")),l=r(e("../classes/motherbot/MMoveState.js")),h=r(e("../classes/motherbot/MShotState.js")),u=r(e("../prefabs/Robot.js")),c=r(e("../prefabs/mine.js")),f=r(e("../prefabs/teleporter.js")),d=r(e("../prefabs/flash.js")),p=r(e("../prefabs/Generator.js")),m=r(e("../prefabs/seekershot.js")),g=r(e("../prefabs/shrapnelGroup.js")),y=r(e("../prefabs/bounceShotGroup.js")),v=r(e("../classes/PlayState.js")),b=r(e("../classes/SuicideMoveState.js")),S=r(e("../classes/DummyState.js")),k=r(e("../classes/SpeedState.js")),x=(r(e("../classes/HuntState.js")),r(e("../classes/SeekState.js"))),w=r(e("../classes/WarpState.js")),P=r(e("../classes/FireState.js")),_=r(e("../classes/SMoveState.js")),T=r(e("../classes/AvoidState.js")),O=r(e("./AgitateState.js"));function r(e){return e&&e.__esModule?e:{default:e}}var A=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.state=e}return a(r,null,[{key:"setUpTeleporters",value:function(){this.teleporters=this.game.add.group();for(var e=this.grid,t=this.game.global.tileSize,i=0;i<this.game.global.ph;i++)for(var a=0;a<this.game.global.pw;a++){if(4==e.getCellVal(a,i)){e.setCell(a,i,0),e.setCell(a+1,i,0),e.setCell(a,i+1,0),e.setCell(a+1,i+1,0);var s=new f.default(this,this.game);s.x=a*t+t,s.y=i*t+t,this.teleporters.add(s)}}0==this.teleporters.length&&this.teleporters.destroy()}},{key:"setUpPortalAnimations",value:function(){if(this.teleporters){this.portalAnims=this.game.add.group();for(var e=0;e<20;e++){var t=this.game.add.sprite(0,0,"portal",0);t.anchor.setTo(.5),t.animations.add("flash",[0,1,2,3],15,!1).killOnComplete=!0,this.portalAnims.add(t),t.kill()}}}},{key:"setUpGenerators",value:function(){this.generators=this.game.add.group();for(var e=this.grid,t=this.game.global.tileSize,i=(this.grid.level,0);i<this.game.global.ph;i++)for(var a=0;a<this.game.global.pw;a++){if(3==e.getCellVal(a,i)){this.grid.clearWallSprite(a*t,i*t),this.grid.clearWallSprite((a+1)*t,i*t),this.grid.clearWallSprite((a+1)*t,(i+1)*t),this.grid.clearWallSprite(a*t,(i+1)*t);var s=new p.default(this,this.game);s.init(a*t+t,i*t+t,10027263),this.generators.add(s)}}}},{key:"setUpGeneratorBots",value:function(){this.grid.level;if(this.generators){for(var e=0;e<10;e++)r.setUpDrone.call(this,{x:-100,y:-100});for(var t=0;t<5;t++)r.setUpDroneLeader.call(this,{x:-100,y:-100});for(var i=0;i<4;i++)r.setUpBounceBot.call(this,{x:-100,y:-100});r.killBot.call(this)}}},{key:"killBot",value:function(){for(var e=0;e<this.enemyRobots.length;e++){var t=this.enemyRobots.getAt(e);t.x==-100*this.game.global.tileSize&&t.kill()}}},{key:"setUpMotherBot",value:function(){this.motherBots=this.game.add.group();var e=this.grid.level,t=this.game.global.tileSize;if(e.motherBot)for(var i=0;i<e.motherBot;i++){var a=r.getSpawnPoint.call(this,4),s=new n.default(this,this.game);s.health=20,s.x=a.x*t,s.y=a.y*t,s.tint=10066329,s.setStateStack([new o.default(1),new l.default(2),new h.default(1)]),this.motherBots.add(s)}}},{key:"setUpChip",value:function(){if(this.grid.level.rules.get_chips){this.chips=this.game.add.group();for(var e=this.game.global.tileSize,t=0;t<5;t++){var i=r.getSpawnPoint.call(this),a=this.game.add.sprite(0,0,"chip");this.game.physics.enable(a,Phaser.Physics.ARCADE),a.smoothed=!1,a.animations.add("blink",[0,1,2,3,4],12,!0),a.animations.play("blink"),a.x=Math.floor(i.x)*e,a.y=Math.floor(i.y)*e,this.chips.add(a)}var s=this.chips.getAt(0),n=[4,5,6,9],o=n[this.game.rnd.integerInRange(n.length)];s.type=o,s=this.chips.getAt(1),o=this.game.rnd.integerInRange(1,3),s.type=o}}},{key:"setUpPlayer",value:function(){var e=this.game.plugins.add(Phaser.Weapon);e.createBullets(5,"shot"),e.bulletKillType=Phaser.Weapon.KILL_WORLD_BOUNDS,e.bulletSpeed=this.game.global.shotSpeed,e.autoFire=!1,e.fireRate=this.game.global.fireRate,e.onFire.add(function(){this.laserSfx.play()},this),this.player=new u.default(this,this.game),this.player.tint=16763989,this.player.x=this.entrySprite.x,this.player.y=this.entrySprite.y,this.player.setStateStack([new v.default]),this.player.type=s.PLAYER,this.player.weapon=e,this.game.global.bulletVarianceOn&&(this.player.weapon.bulletAngleVariance=5),this.mines=this.game.add.group(),this.flashGroup=this.game.add.group();for(var t=0;t<6;t++){var i=new c.default(this,this.game);this.mines.add(i);var a=new d.default(this,this.game);this.flashGroup.add(a)}}},{key:"setUpAudio",value:function(){this.game.global.mute?this.game.sound.volume=0:this.game.sound.volume=this.game.global.volume,this.playerHitSfx=this.add.audio("playerhitSfx"),this.speedupSfx=this.add.audio("speedupSfx"),this.laserSfx=this.add.audio("laserSfx"),this.warpinSfx=this.add.audio("warpinSfx"),this.explodeSfx=this.add.audio("explodeSfx"),this.damageSfx=this.add.audio("damageSfx"),this.invincibleSfx=this.add.audio("invincibleSfx"),this.botshotSfx=this.add.audio("botshotSfx"),this.chipSfx=this.add.audio("chipSfx"),this.seekerShotSfx=this.add.audio("seekerShotSfx"),this.bounceShotSfx=this.add.audio("bounceShotSfx"),this.bonusSfx=this.add.audio("bonusSfx"),this.upgradeSfx=this.add.audio("upgradeSfx"),this.teleportSfx=this.add.audio("teleportSfx"),this.botshotSfx.volume=.5,this.laserSfx.volume=.5,this.explodeSfx.volume=.25}},{key:"setUpBotAudio",value:function(){this.destroy_the_intruderSfx=this.add.audio("destroy_the_intruderSfx"),this.the_intruder_must_not_escapeSfx=this.add.audio("the_intruder_must_not_escapeSfx"),this.charge_the_intruderSfx=this.add.audio("charge_the_intruderSfx"),this.kill_all_humansSfx=this.add.audio("kill_all_humansSfx"),this.attack_pattern_analysis_completeSfx=this.add.audio("attack_pattern_analysis_completeSfx"),this.why_do_you_persistSfx=this.add.audio("why_do_you_persistSfx"),this.resistance_is_futileSfx=this.add.audio("resistance_is_futileSfx"),this.you_need_an_upgradeSfx=this.add.audio("you_need_an_upgradeSfx"),this.hasta_la_vista_babySfx=this.add.audio("hasta_la_vista_babySfx"),this.virus_eliminatedSfx=this.add.audio("virus_eliminatedSfx"),this.destroy_the_malfunctionSfx=this.add.audio("destroy_the_malfunctionSfx"),this.you_have_inferior_circuitrySfx=this.add.audio("you_have_inferior_circuitrySfx"),this.run_like_a_chickenSfx=this.add.audio("run_like_a_chickenSfx"),this.ha_ha_ha_haSfx=this.add.audio("ha_ha_ha_haSfx"),this.generators_onlineSfx=this.add.audio("generators_onlineSfx"),this.ou812_complySfx=this.add.audio("ou812_complySfx"),this.playTaunts=[this.ou812_complySfx,this.destroy_the_intruderSfx,this.the_intruder_must_not_escapeSfx,this.kill_all_humansSfx,this.charge_the_intruderSfx,this.why_do_you_persistSfx,this.attack_pattern_analysis_completeSfx,this.resistance_is_futileSfx,this.destroy_the_malfunctionSfx,this.you_have_inferior_circuitrySfx],this.killTaunts=[this.hasta_la_vista_babySfx,this.you_need_an_upgradeSfx,this.ha_ha_ha_haSfx,this.virus_eliminatedSfx];var t=0;this.tauntTimer=this.game.time.events.loop(8e3,function(){var e=this.game.rnd.integerInRange(0,this.playTaunts.length-1);e==t&&(e-=1),e<0&&(e=0),this.playTaunts[e].play(),t=e},this,t)}},{key:"setUpEnemyShotWeapon",value:function(){var e=this.game.plugins.add(Phaser.Weapon);e.createBullets(5,"shot"),e.bulletKillType=Phaser.Weapon.KILL_WORLD_BOUNDS,e.bulletSpeed=400,e.autoFire=!1,e.fireRate=0,e.onFire.add(function(e){e.tint=16711680},this),this.enemyShotWeapon=e}},{key:"setUpBounceShotGroup",value:function(){this.bounceShotGroup=new y.default(this)}},{key:"setUpEnemy",value:function(){this.enemyRobots=this.game.add.group();for(var e=this.grid.level,t=[e.suicidebots,e.shotDrones,e.bouncebots,e.speedbots,e.drones,e.tanks,e.droneLeader,e.sprinter,e.seekerbots],i=[r.setUpSuicideBot,r.setUpShotDrone,r.setUpBounceBot,r.setUpSpeedBot,r.setUpDrone,r.setUpTank,r.setUpDroneLeader,r.setUpSprinter,r.setUpSeekerBot],a=0;a<t.length;a++){var s=t[a];if(s)for(var n=0;n<s;n++){var o=r.getSpawnPoint.call(this);i[a].call(this,o)}}}},{key:"getSpawnPoint",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:2,t=null,i=null,a=null;do{for(;0==(t=this.grid.getFreeSpace(e)););i=t.x*this.game.global.tileSize,a=t.y*this.game.global.tileSize}while(this.game.physics.arcade.distanceToXY(this.player,i,a)<100);return t}},{key:"setUpBounceBot",value:function(e){var t=this.game.global.tileSize,i=new u.default(this,this.game);i.type=s.BOUNCEBOT,i.health=1,i.tint=32896,i.x=Math.floor(e.x)*t,i.y=Math.floor(e.y)*t,i.setStateStack([new w.default,new S.default(1)]),this.enemyRobots.add(i)}},{key:"setUpSpeedBot",value:function(e){var t=this.game.global.tileSize,i=new u.default(this,this.game);i.type=s.SPEEDBOT,i.health=6,i.tint=65535,i.x=Math.floor(e.x)*t,i.y=Math.floor(e.y)*t,i.setStateStack([new w.default,new k.default(1)]),this.enemyRobots.add(i)}},{key:"setUpTank",value:function(e){var t=this.game.global.tileSize,i=new u.default(this,this.game);i.type=s.TANK,i.health=3e3,i.tint=65280,i.x=Math.floor(e.x)*t,i.y=Math.floor(e.y)*t,i.setStateStack([new w.default,new S.default(1)]),this.enemyRobots.add(i)}},{key:"setUpDroneLeader",value:function(e){var t=this.game.global.tileSize,i=new u.default(this,this.game);i.health=5,i.type=s.DRONELEADER,i.tint=13369344,i.x=Math.floor(e.x)*t,i.y=Math.floor(e.y)*t,i.setStateStack([new w.default,new S.default(2),new x.default(1)]),this.enemyRobots.add(i)}},{key:"setUpShrapnelGroup",value:function(){this.grid.level.suicidebots&&(this.shrapnelGroup=new g.default(this))}},{key:"setUpSuicideBot",value:function(e){var t=this.game.global.tileSize,i=new u.default(this,this.game);i.health=6,i.type=s.SUICIDEBOT,i.tint=9662683,i.x=Math.floor(e.x)*t,i.y=Math.floor(e.y)*t,i.setStateStack([new w.default,new b.default(2),new O.default]),this.enemyRobots.add(i)}},{key:"setUpDrone",value:function(e){var t=this.game.global.tileSize,i=new u.default(this,this.game);i.health=1,i.type=s.DRONE,i.tint=16729156,i.x=Math.floor(e.x)*t,i.y=Math.floor(e.y)*t,i.setStateStack([new w.default,new S.default(1)]),this.enemyRobots.add(i)}},{key:"setUpShotDrone",value:function(e){var t=this.game.global.tileSize,i=new u.default(this,this.game);i.health=1,i.type=s.SHOTDRONE,i.tint=10506797,i.x=Math.floor(e.x)*t,i.y=Math.floor(e.y)*t,i.setStateStack([new w.default,new x.default(2),new P.default(3),new S.default(1)]),this.enemyRobots.add(i)}},{key:"setUpSprinter",value:function(e){var t=this.game.global.tileSize,i=new u.default(this,this.game);i.health=5,i.type=s.SPRINTER,i.tint=11141290,i.x=Math.floor(e.x)*t,i.y=Math.floor(e.y)*t,i.setStateStack([new w.default,new _.default(2),new P.default(1)]),this.enemyRobots.add(i)}},{key:"setUpSeekerShot",value:function(){this.seekerShots=[];for(var e=0;e<2;e++)this.seekerShots.push(new m.default(this))}},{key:"setUpSeekerBot",value:function(e){var t=this.game.global.tileSize,i=new u.default(this,this.game);i.health=5,i.type=s.SEEKER,i.tint=11184810,i.x=Math.floor(e.x)*t,i.y=Math.floor(e.y)*t,i.setStateStack([new w.default,new T.default(1)]),this.enemyRobots.add(i)}}]),r}();i.default=A},{"../classes/AvoidState.js":26,"../classes/DummyState.js":28,"../classes/FireState.js":29,"../classes/HuntState.js":33,"../classes/PlayState.js":35,"../classes/SMoveState.js":36,"../classes/SeekState.js":38,"../classes/SpeedState.js":39,"../classes/SuicideMoveState.js":40,"../classes/WarpState.js":41,"../classes/const.js":44,"../classes/motherbot/MMoveState.js":45,"../classes/motherbot/MShotState.js":46,"../classes/motherbot/MWarpState.js":47,"../prefabs/Generator.js":50,"../prefabs/MotherBot.js":51,"../prefabs/Robot.js":52,"../prefabs/bounceShotGroup.js":55,"../prefabs/flash.js":56,"../prefabs/mine.js":57,"../prefabs/seekershot.js":59,"../prefabs/shrapnelGroup.js":60,"../prefabs/teleporter.js":62,"./AgitateState.js":25}],35:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,s=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),n=e("../classes/cheats.js"),o=(a=n)&&a.__esModule?a:{default:a};var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return s(e,[{key:"enter",value:function(e){e.data.playData||(e.data.playData={});var t=e.data.playData;t.cursors=e.game.input.keyboard.createCursorKeys(),t.fireUp=e.game.input.keyboard.addKey(Phaser.Keyboard.W),t.fireDown=e.game.input.keyboard.addKey(Phaser.Keyboard.S),t.fireLeft=e.game.input.keyboard.addKey(Phaser.Keyboard.A),t.fireRight=e.game.input.keyboard.addKey(Phaser.Keyboard.D),t.mineButton=e.game.input.keyboard.addKey(Phaser.Keyboard.F),t.speed=e.game.global.speed,t.ow=e.width/2,t.oh=e.height/2,t.moving=!1,t.moveDirection=Phaser.NONE,t.tX=-100,t.tY=-100,t.cheats=new o.default(e.state,e.game)}},{key:"getDirections",value:function(e){var t=e.data.playData,i=e.state.grid,a=e.state.game.global,s=Math.floor(e.x/a.tileSize),n=Math.floor(e.y/a.tileSize);this.checkSides(i,s,n,t)}},{key:"checkSides",value:function(e,t,i,a){a.left=e.isFree(t-1,i)&&e.isFree(t-1,i+1),a.right=e.isFree(t+2,i)&&e.isFree(t+2,i+1),a.up=e.isFree(t,i-1)&&e.isFree(t+1,i-1),a.down=e.isFree(t,i+2)&&e.isFree(t+1,i+2)}},{key:"setAnimation",value:function(e,t){t.animations.getAnimation(e).isPlaying||t.animations.play(e)}},{key:"update",value:function(e){var t=e.data.playData,i=e.state.game.global;if(t.cheats.checkCheatButtons(e),t.mineButton.justUp&&0<e.game.global.mines){e.game.global.mines--,e.state.gui.showMines();var a=e.state.mines.getFirstDead();a||(a=e.state.mines.getFirstAlive()).explode(),a.lay(e.x+e.width/2,e.y+e.width/2)}if(t.fireUp.isDown&&t.fireRight.isDown?e.weapon.fireAngle=Phaser.ANGLE_NORTH_EAST:t.fireUp.isDown&&t.fireLeft.isDown?e.weapon.fireAngle=Phaser.ANGLE_NORTH_WEST:t.fireDown.isDown&&t.fireLeft.isDown?e.weapon.fireAngle=Phaser.ANGLE_SOUTH_WEST:t.fireDown.isDown&&t.fireRight.isDown?e.weapon.fireAngle=Phaser.ANGLE_SOUTH_EAST:t.fireUp.isDown?e.weapon.fireAngle=Phaser.ANGLE_UP:t.fireDown.isDown?e.weapon.fireAngle=Phaser.ANGLE_DOWN:t.fireLeft.isDown?e.weapon.fireAngle=Phaser.ANGLE_LEFT:t.fireRight.isDown?e.weapon.fireAngle=Phaser.ANGLE_RIGHT:e.weapon.fireAngle=null,null!=e.weapon.fireAngle){var s=new Phaser.Point(e.x+24,e.y+24);e.weapon.fire(s)}if(0==t.moving&&(t.moving=!0,this.getDirections(e),t.cursors.right.isDown&&t.right?(this.setAnimation("right",e),t.moveDirection=Phaser.RIGHT,t.tX=Math.floor(e.x+i.tileSize)):t.cursors.left.isDown&&t.left?(this.setAnimation("left",e),t.moveDirection=Phaser.LEFT,t.tX=Math.floor(e.x-i.tileSize)):t.cursors.down.isDown&&t.down?(this.setAnimation("down",e),t.moveDirection=Phaser.DOWN,t.tY=Math.floor(e.y+i.tileSize)):t.cursors.up.isDown&&t.up?(this.setAnimation("up",e),t.moveDirection=Phaser.UP,t.tY=Math.floor(e.y-i.tileSize)):(e.animations.stop(),e.frame=0,t.moving=!1,t.moveDirection=Phaser.NONE)),t.moving)switch(t.moveDirection){case Phaser.RIGHT:e.x=e.x+t.speed,e.x>=t.tX&&(e.x=Math.floor(t.tX),t.moving=!1);break;case Phaser.LEFT:e.x=e.x-t.speed,e.x<=t.tX&&(e.x=Math.floor(t.tX),t.moving=!1);break;case Phaser.UP:e.y=e.y-t.speed,e.y<=t.tY&&(e.y=Math.floor(t.tY),t.moving=!1);break;case Phaser.DOWN:e.y=e.y+t.speed,e.y>=t.tY&&(e.y=Math.floor(t.tY),t.moving=!1)}}},{key:"exit",value:function(e){e.data.playData={}}}]),e}();i.default=r},{"../classes/cheats.js":43}],36:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.exitState=e)}return a(t,[{key:"enter",value:function(e){e.data.smoveData={};var t=e.data.smoveData;t.speed=2,t.moveState=0,t.moveDirection=Phaser.NONE,t.moveCount=0,t.moveMax=10}},{key:"getMoveDirection",value:function(e){var t=e.state.grid,i=e.state.game.global,a=e.x/i.tileSize,s=e.y/i.tileSize,n=e.data.smoveData;this.checkSides(t,a,s,n);var o=[];n.left&&o.push(Phaser.LEFT),n.right&&o.push(Phaser.RIGHT),n.up&&o.push(Phaser.UP),n.down&&o.push(Phaser.DOWN),n.moveDirection=o[e.game.rnd.integerInRange(0,o.length-1)]}},{key:"checkSides",value:function(e,t,i,a){a.left=e.isFree(t-1,i)&&e.isFree(t-1,i+1),a.right=e.isFree(t+2,i)&&e.isFree(t+2,i+1),a.up=e.isFree(t,i-1)&&e.isFree(t+1,i-1),a.down=e.isFree(t,i+2)&&e.isFree(t+1,i+2)}},{key:"checkFree",value:function(e,t){var i=e.state.grid,a=e.state.game.global,s=e.x/a.tileSize,n=e.y/a.tileSize;switch(this.checkSides(i,s,n,t),t.moveDirection){case Phaser.LEFT:t.left&&(t.moveState=1);break;case Phaser.RIGHT:t.right&&(t.moveState=1);break;case Phaser.UP:t.up&&(t.moveState=1);break;case Phaser.DOWN:t.down&&(t.moveState=1)}1!=t.moveState&&(t.moveState=0)}},{key:"setAnimation",value:function(e,t){t.animations.getAnimation(e).isPlaying||t.animations.play(e)}},{key:"update",value:function(e){var t=e.data.smoveData,i=e.state.game.global;if(0==t.moveState&&(this.getMoveDirection(e),t.moveState=1),1==t.moveState)switch(t.moveState=2,t.moveDirection){case Phaser.RIGHT:this.setAnimation("right",e),t.tX=Math.floor(e.x+i.tileSize);break;case Phaser.LEFT:this.setAnimation("left",e),t.tX=Math.floor(e.x-i.tileSize);break;case Phaser.DOWN:this.setAnimation("down",e),t.tY=Math.floor(e.y+i.tileSize);break;case Phaser.UP:this.setAnimation("up",e),t.tY=Math.floor(e.y-i.tileSize)}if(2==t.moveState)switch(t.moveDirection){case Phaser.RIGHT:e.x=e.x+t.speed,e.x>=t.tX&&(e.x=Math.floor(t.tX),t.moveState=3,t.moveCount++);break;case Phaser.LEFT:e.x=e.x-t.speed,e.x<=t.tX&&(e.x=Math.floor(t.tX),t.moveState=3,t.moveCount++);break;case Phaser.UP:e.y=e.y-t.speed,e.y<=t.tY&&(e.y=Math.floor(t.tY),t.moveState=3,t.moveCount++);break;case Phaser.DOWN:e.y=e.y+t.speed,e.y>=t.tY&&(e.y=Math.floor(t.tY),t.moveState=3,t.moveCount++)}3==t.moveState&&t.moveCount==t.moveMax?(t.moveState=4,e.animations.stop(),e.frame=0,this.exitState?e.fsm.changeState(e.fsm.stateStack[this.exitState]):e.fsm.changeState(e.fsm.stateStack[2])):3==t.moveState&&this.checkFree(e,t)}},{key:"exit",value:function(e){e.data.smoveData={}}}]),t}();i.default=s},{}],37:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.state=e,this.game=t,this.rsData={16729156:87,13369344:105,65280:150,11141290:102,65535:200,11184810:230,32896:65,10506797:131,9662683:91}}return a(i,[{key:"robotScore",value:function(e){this.state.gui.incScore(this.rsData[e])}},{key:"generatorScore",value:function(e){this.state.gui.incScore(15*e)}}]),i}();i.default=s},{}],38:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();e("pathfinding");var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.exitState=e)}return a(t,[{key:"enter",value:function(e){e.data.seekData={};var t=e.data.seekData;t.speed=1.1,t.moveState=0,t.moveDirection=Phaser.NONE,t.moveCount=0,t.moveMax=e.game.rnd.integerInRange(2,10)}},{key:"getDirections",value:function(e){var t=e.state.grid,i=e.state.game.global,a=e.x/i.tileSize,s=e.y/i.tileSize,n=e.data.seekData,o=e.state.player;this.checkSides(t,a,s,n),n.moveDirection=Phaser.NONE,n.left&&e.x>o.x?n.moveDirection=Phaser.LEFT:n.right&&e.x<o.x&&(n.moveDirection=Phaser.RIGHT),n.up&&e.y>o.y?n.moveDirection=Phaser.UP:n.down&&e.y<o.y&&(n.moveDirection=Phaser.DOWN)}},{key:"checkSides",value:function(e,t,i,a){a.left=e.isFree(t-1,i)&&e.isFree(t-1,i+1),a.right=e.isFree(t+2,i)&&e.isFree(t+2,i+1),a.up=e.isFree(t,i-1)&&e.isFree(t+1,i-1),a.down=e.isFree(t,i+2)&&e.isFree(t+1,i+2)}},{key:"setAnimation",value:function(e,t){t.animations.getAnimation(e).isPlaying||t.animations.play(e)}},{key:"update",value:function(e){var t=e.data.seekData,i=e.state.game.global;if(0==t.moveState&&(this.getDirections(e),t.moveState=1),1==t.moveState)switch(t.moveState=2,t.moveDirection){case Phaser.RIGHT:this.setAnimation("right",e),t.tX=Math.floor(e.x+i.tileSize);break;case Phaser.LEFT:this.setAnimation("left",e),t.tX=Math.floor(e.x-i.tileSize);break;case Phaser.DOWN:this.setAnimation("down",e),t.tY=Math.floor(e.y+i.tileSize);break;case Phaser.UP:this.setAnimation("up",e),t.tY=Math.floor(e.y-i.tileSize);break;case Phaser.NONE:t.moveState=0}if(2==t.moveState)switch(t.moveDirection){case Phaser.RIGHT:e.x=e.x+t.speed,e.x>=t.tX&&(e.x=Math.floor(t.tX),t.moveState=3,t.moveCount++);break;case Phaser.LEFT:e.x=e.x-t.speed,e.x<=t.tX&&(e.x=Math.floor(t.tX),t.moveState=3,t.moveCount++);break;case Phaser.UP:e.y=e.y-t.speed,e.y<=t.tY&&(e.y=Math.floor(t.tY),t.moveState=3,t.moveCount++);break;case Phaser.DOWN:e.y=e.y+t.speed,e.y>=t.tY&&(e.y=Math.floor(t.tY),t.moveState=3,t.moveCount++)}t.moveDirection==Phaser.NONE||3==t.moveState&&t.moveCount==t.moveMax?(t.moveState=4,e.animations.stop(),e.frame=0,this.exitState?e.fsm.changeState(e.fsm.stateStack[this.exitState]):e.fsm.changeState(e.fsm.stateStack[1])):3==t.moveState&&(t.moveState=0)}},{key:"exit",value:function(e){e.data.seekData={}}}]),t}();i.default=s},{pathfinding:3}],39:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.exitState=e)}return a(t,[{key:"enter",value:function(e){e.data.speedData={};var t=e.data.speedData;t.speed=1,t.moveState=0,t.moveDirection=Phaser.NONE,t.moveCount=0,t.moveMax=10}},{key:"getMoveDirection",value:function(e){var t=e.state.grid,i=e.state.game.global,a=e.x/i.tileSize,s=e.y/i.tileSize,n=e.data.speedData;this.checkSides(t,a,s,n);var o=[];n.left&&o.push(Phaser.LEFT),n.right&&o.push(Phaser.RIGHT),n.up&&o.push(Phaser.UP),n.down&&o.push(Phaser.DOWN),n.moveDirection=o[e.game.rnd.integerInRange(0,o.length-1)]}},{key:"checkSides",value:function(e,t,i,a){a.left=e.isFree(t-1,i)&&e.isFree(t-1,i+1),a.right=e.isFree(t+2,i)&&e.isFree(t+2,i+1),a.up=e.isFree(t,i-1)&&e.isFree(t+1,i-1),a.down=e.isFree(t,i+2)&&e.isFree(t+1,i+2)}},{key:"checkFree",value:function(e,t){var i=e.state.grid,a=e.state.game.global,s=e.x/a.tileSize,n=e.y/a.tileSize;switch(this.checkSides(i,s,n,t),t.moveDirection){case Phaser.LEFT:t.left&&(t.moveState=1);break;case Phaser.RIGHT:t.right&&(t.moveState=1);break;case Phaser.UP:t.up&&(t.moveState=1);break;case Phaser.DOWN:t.down&&(t.moveState=1)}1!=t.moveState&&(t.moveState=0)}},{key:"setAnimation",value:function(e,t){t.animations.getAnimation(e).isPlaying||t.animations.play(e)}},{key:"update",value:function(e){var t=e.data.speedData,i=e.state.game.global;if(0==t.moveState&&(this.getMoveDirection(e),t.moveState=1),1==t.moveState)switch(t.moveState=2,t.moveDirection){case Phaser.RIGHT:this.setAnimation("right",e),t.tX=Math.floor(e.x+i.tileSize);break;case Phaser.LEFT:this.setAnimation("left",e),t.tX=Math.floor(e.x-i.tileSize);break;case Phaser.DOWN:this.setAnimation("down",e),t.tY=Math.floor(e.y+i.tileSize);break;case Phaser.UP:this.setAnimation("up",e),t.tY=Math.floor(e.y-i.tileSize)}if(2==t.moveState)switch(t.moveDirection){case Phaser.RIGHT:e.x=e.x+t.speed,e.x>=t.tX&&(e.x=Math.floor(t.tX),t.moveState=3,t.moveCount++);break;case Phaser.LEFT:e.x=e.x-t.speed,e.x<=t.tX&&(e.x=Math.floor(t.tX),t.moveState=3,t.moveCount++);break;case Phaser.UP:e.y=e.y-t.speed,e.y<=t.tY&&(e.y=Math.floor(t.tY),t.moveState=3,t.moveCount++);break;case Phaser.DOWN:e.y=e.y+t.speed,e.y>=t.tY&&(e.y=Math.floor(t.tY),t.moveState=3,t.moveCount++)}3==t.moveState&&this.checkFree(e,t)}},{key:"exit",value:function(e){e.data.speedData={}}}]),t}();i.default=s},{}],40:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.exitState=e)}return a(t,[{key:"enter",value:function(e){e.data={};var t=e.data;t.timers={},t.speed=1,t.moveState=0,t.moveDirection=Phaser.NONE,t.timers.finishTimer=e.game.time.now+1e3*e.game.rnd.integerInRange(3,5)}},{key:"getMoveDirection",value:function(e){var t=e.state.grid,i=(e.state.game.global,t.screenToGrid(e.x)),a=t.screenToGrid(e.y),s=e.data;this.checkSides(t,i,a,s);var n=[];s.left&&n.push(Phaser.LEFT),s.right&&n.push(Phaser.RIGHT),s.up&&n.push(Phaser.UP),s.down&&n.push(Phaser.DOWN),s.moveDirection=n[e.game.rnd.integerInRange(0,n.length-1)]}},{key:"checkSides",value:function(e,t,i,a){a.left=e.isFree(t-1,i)&&e.isFree(t-1,i+1),a.right=e.isFree(t+2,i)&&e.isFree(t+2,i+1),a.up=e.isFree(t,i-1)&&e.isFree(t+1,i-1),a.down=e.isFree(t,i+2)&&e.isFree(t+1,i+2)}},{key:"checkFree",value:function(e,t){var i=e.state.grid,a=e.state.game.global,s=Math.floor(e.x/a.tileSize),n=Math.floor(e.y/a.tileSize);switch(this.checkSides(i,s,n,t),t.moveDirection){case Phaser.LEFT:t.left&&(t.moveState=1);break;case Phaser.RIGHT:t.right&&(t.moveState=1);break;case Phaser.UP:t.up&&(t.moveState=1);break;case Phaser.DOWN:t.down&&(t.moveState=1)}1!=t.moveState&&(t.moveState=0)}},{key:"setAnimation",value:function(e,t){t.animations.getAnimation(e).isPlaying||t.animations.play(e)}},{key:"update",value:function(e){var t=e.data,i=e.state.game.global;if(t.timers.finishTimer<e.game.time.now)this.exitState?e.fsm.changeState(e.fsm.stateStack[this.exitState]):e.fsm.changeState(e.fsm.stateStack[1]);else{if(0==t.moveState&&(this.getMoveDirection(e),t.moveState=1),1==t.moveState)switch(t.moveState=2,t.moveDirection){case Phaser.RIGHT:this.setAnimation("right",e),t.tX=Math.floor(e.x+i.tileSize);break;case Phaser.LEFT:this.setAnimation("left",e),t.tX=Math.floor(e.x-i.tileSize);break;case Phaser.DOWN:this.setAnimation("down",e),t.tY=Math.floor(e.y+i.tileSize);break;case Phaser.UP:this.setAnimation("up",e),t.tY=Math.floor(e.y-i.tileSize)}if(2==t.moveState)switch(t.moveDirection){case Phaser.RIGHT:e.x=e.x+t.speed,e.x>=t.tX&&(e.x=Math.floor(t.tX),t.moveState=3);break;case Phaser.LEFT:e.x=e.x-t.speed,e.x<=t.tX&&(e.x=Math.floor(t.tX),t.moveState=3);break;case Phaser.UP:e.y=e.y-t.speed,e.y<=t.tY&&(e.y=Math.floor(t.tY),t.moveState=3);break;case Phaser.DOWN:e.y=e.y+t.speed,e.y>=t.tY&&(e.y=Math.floor(t.tY),t.moveState=3)}3===t.moveState&&this.checkFree(e,t)}}},{key:"exit",value:function(e){e.data={}}}]),t}();i.default=s},{}],41:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,s=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),n=e("../prefabs/Warpin.js"),o=(a=n)&&a.__esModule?a:{default:a};var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return s(e,[{key:"enter",value:function(e){e.data.warpData={},e.visible=!1,e.data.warpData.active=!0,e.warpSprite||(e.warpSprite=new o.default(e.state,e.game)),e.warpSprite.tint=e.tint,e.warpSprite.init(e.x+e.width/2,e.y+e.width/2,e)}},{key:"update",value:function(e){e.data.warpData.active||e.fsm.changeState(e.fsm.stateStack[1])}},{key:"exit",value:function(e){e.data.warpData={},e.visible=!0}}]),e}();i.default=r},{"../prefabs/Warpin.js":53}],42:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.state=e,this.game=t,this.upgradeSprites=[],this.bonusSprites=[];for(var i=0;i<5;i++){var a=this.game.add.bitmapText(0,0,"computer","",48);this.bonusSprites.push(a),a.anchor.setTo(.5),a.kill();var s=this.game.add.bitmapText(0,0,"arcade","",24);s.anchor.setTo(.5),s.kill(),this.upgradeSprites.push(s)}}return a(n,[{key:"showUpgrade",value:function(e,t,i){for(var a=null,s=0;s<this.upgradeSprites.length;s++)if(!this.upgradeSprites[s].alive){a=this.upgradeSprites[s];break}if(null!=a){a.reset(e,t),a.setText(i);var n=a.width/2,o=a.height/2;a.x+n>this.game.width&&(a.x=this.game.width-a.width),a.x-n<0&&(a.x=n),a.y+o>this.game.height&&(a.y=this.game.height-a.height),a.y-o<0&&(a.y=o),a.flashTimer=this.game.time.events.add(2e3,function(){a.kill()},this,a)}}},{key:"show",value:function(e,t,i,a){for(var s=null,n=0;n<this.bonusSprites.length;n++)if(!this.bonusSprites[n].alive){s=this.bonusSprites[n];break}if(null!=s){var o=0;s.reset(),s.tweenA=this.game.add.tween(s).to({y:"-100"},1e3),s.tweenA.onComplete.add(function(){this.game.time.events.remove(s.flashTimer),s.kill()},this,s),s.x=e,s.y=t,s.setText(i),s.tint=a[o],s.tweenA.start(),s.flashTimer=this.game.time.events.loop(100,function(){++o>=a.length&&(o=0),s.tint=a[o]},this,s,a,o)}}}]),n}();i.default=s},{}],43:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,s=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),n=e("../classes/pickup.js"),o=(a=n)&&a.__esModule?a:{default:a};var r=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.state=e,this.game=t,this.mute=this.game.input.keyboard.addKey(Phaser.Keyboard.M),this.b1=this.game.input.keyboard.addKey(Phaser.Keyboard.ONE),this.b2=this.game.input.keyboard.addKey(Phaser.Keyboard.TWO),this.b3=this.game.input.keyboard.addKey(Phaser.Keyboard.THREE),this.b4=this.game.input.keyboard.addKey(Phaser.Keyboard.FOUR),this.b5=this.game.input.keyboard.addKey(Phaser.Keyboard.FIVE),this.b6=this.game.input.keyboard.addKey(Phaser.Keyboard.SIX)}return s(i,[{key:"checkCheatButtons",value:function(e){this.mute.justUp&&(this.game.global.mute=!this.game.global.mute,this.game.global.mute?this.game.sound.volume=0:this.game.sound.volume=this.game.global.volume,this.state.gui.showMute()),this.game.global.cheat&&(this.b1.justUp&&o.default.decodeChip.call(this.state,{type:4,x:e.x,y:e.y}),this.b2.justUp&&o.default.decodeChip.call(this.state,{type:5,x:e.x,y:e.y}),this.b3.justUp&&o.default.decodeChip.call(this.state,{type:6,x:e.x,y:e.y}),this.b4.justUp&&o.default.decodeChip.call(this.state,{type:7,x:e.x,y:e.y}),this.b5.justUp&&o.default.decodeChip.call(this.state,{type:8,x:e.x,y:e.y}),this.b6.justUp&&(this.game.global.godMode=!this.game.global.godMode,this.state.gui.showGodMode()))}}]),i}();i.default=r},{"../classes/pickup.js":48}],44:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.DRONE=Symbol("drone"),i.DRONELEADER=Symbol("droneleader"),i.BOUNCEBOT=Symbol("bouncebot"),i.TANK=Symbol("tank"),i.SUICIDEBOT=Symbol("suicidebot"),i.SHOTDRONE=Symbol("shotdrone"),i.SPRINTER=Symbol("sprinter"),i.SPEEDBOT=Symbol("speedbot"),i.SEEKERBOT=Symbol("seekerbot"),i.MOTHERBOT=Symbol("motherbot"),i.PLAYER=Symbol("player"),i.ATTRACT=Symbol("attract"),i.ENTER_SCORE=Symbol("enter_score")},{}],45:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.exitState=e)}return a(t,[{key:"enter",value:function(e){console.log("entering MMove state"),e.data.mmoveData={};var t=e.data.mmoveData;t.vspeed=4,t.hspeed=4,t.moveState=0,t.moveDirection=Phaser.NONE,t.moveCount=0,t.moveMax=40}},{key:"getMoveDirection",value:function(e){var t=e.state.grid,i=e.state.game.global,a=e.x/i.tileSize,s=e.y/i.tileSize,n=e.data.mmoveData;this.checkSides(t,a,s,n);var o=[];n.left&&o.push(Phaser.LEFT),n.right&&o.push(Phaser.RIGHT),n.up&&o.push(Phaser.UP),n.down&&o.push(Phaser.DOWN),n.moveDirection=o[e.game.rnd.integerInRange(0,o.length-1)]}},{key:"checkSides",value:function(e,t,i,a){a.left=!0,a.right=!0,a.up=!0,a.down=!0;for(var s=0;s<4;s++)e.isFree(t-1,i+s)||(a.left=!1),e.isFree(t+4,i+s)||(a.right=!1);for(var n=0;n<4;n++)e.isFree(t+n,i-1)||(a.up=!1),e.isFree(t+n,i+4)||(a.down=!1)}},{key:"checkFree",value:function(e,t){var i=e.state.grid,a=e.state.game.global,s=e.x/a.tileSize,n=e.y/a.tileSize;switch(this.checkSides(i,s,n,t),t.moveDirection){case Phaser.LEFT:t.left&&(t.moveState=1);break;case Phaser.RIGHT:t.right&&(t.moveState=1);break;case Phaser.UP:t.up&&(t.moveState=1);break;case Phaser.DOWN:t.down&&(t.moveState=1)}1!=t.moveState&&(t.moveState=0)}},{key:"setAnimation",value:function(e,t){t.animations.getAnimation(e).isPlaying||t.animations.play(e)}},{key:"update",value:function(e){var t=e.data.mmoveData,i=e.state.game.global;if(0==t.moveState&&(this.getMoveDirection(e),t.moveState=1),1==t.moveState)switch(t.moveState=2,t.moveDirection){case Phaser.RIGHT:this.setAnimation("right",e),t.tX=Math.floor(e.x+i.tileSize);break;case Phaser.LEFT:this.setAnimation("left",e),t.tX=Math.floor(e.x-i.tileSize);break;case Phaser.DOWN:this.setAnimation("down",e),t.tY=Math.floor(e.y+i.tileSize);break;case Phaser.UP:this.setAnimation("up",e),t.tY=Math.floor(e.y-i.tileSize)}if(2==t.moveState)switch(t.moveDirection){case Phaser.RIGHT:e.x=e.x+t.hspeed,e.x>=t.tX&&(e.x=Math.floor(t.tX),t.moveState=3,t.moveCount++);break;case Phaser.LEFT:e.x=e.x-t.hspeed,e.x<=t.tX&&(e.x=Math.floor(t.tX),t.moveState=3,t.moveCount++);break;case Phaser.UP:e.y=e.y-t.vspeed,e.y<=t.tY&&(e.y=Math.floor(t.tY),t.moveState=3,t.moveCount++);break;case Phaser.DOWN:e.y=e.y+t.vspeed,e.y>=t.tY&&(e.y=Math.floor(t.tY),t.moveState=3,t.moveCount++)}3==t.moveState&&t.moveCount==t.moveMax?(t.moveState=4,e.animations.stop(),e.frame=0,this.exitState?e.fsm.changeState(e.fsm.stateStack[this.exitState]):e.fsm.changeState(e.fsm.stateStack[2])):3==t.moveState&&this.checkFree(e,t)}},{key:"exit",value:function(e){e.data.mmoveData={}}}]),t}();i.default=s},{}],46:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.exitState=e)}return a(t,[{key:"enter",value:function(e){e.data.mShotData={},Phaser.Utils.chanceRoll(50)?(e.data.shotCount=0,e.data.shotDir=e.game.math.radToDeg(e.game.physics.arcade.angleBetweenCenters(e,e.state.player)),e.game.time.events.repeat(100,5,this.fire,this,e)):this.doExit(e)}},{key:"doExit",value:function(e){this.exitState?e.fsm.changeState(e.fsm.stateStack[this.exitState]):e.fsm.changeState(e.fsm.stateStack[1])}},{key:"fire",value:function(e){e.state.enemyShotWeapon.fireAngle=e.data.shotDir;var t=new Phaser.Point(e.x+2*e.game.global.tileSize,e.y+2*e.game.global.tileSize),i=e.state.enemyShotWeapon.fire(t);i&&(i.tint=16711680,e.state.botshotSfx.play()),e.data.shotCount++,5<=e.data.shotCount&&this.doExit(e)}},{key:"update",value:function(e){e.data.mShotData,e.state.game.global}},{key:"exit",value:function(e){e.data.mShotData={}}}]),t}();i.default=s},{}],47:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.exitState=e)}return a(t,[{key:"enter",value:function(e){console.log("entering MWarp state"),e.data.warpData={},e.visible=!1,e.data.warpData.warpSprites=[];for(var t=1;t<3;t++)for(var i=1;i<3;i++){var a=e.game.add.sprite(0,0,"warpin"+e.game.rnd.integerInRange(1,4),0);a.animations.add("warpin",null,45,!1),a.x=e.x+48*i-24,a.y=e.y+48*t-24,a.tint=e.tint,a.anchor.setTo(.5,.5),a.width*=2,a.height*=2,a.smoothed=!1,a.events.onAnimationComplete.add(function(){this.kill()},a),a.animations.play("warpin"),e.data.warpData.warpSprites.push(a)}e.data.warpData.warpSprites[0].events.onAnimationComplete.add(function(){e.reset(e.x,e.y,e.health),e.state.startGame=!0,e.fsm.changeState(e.fsm.stateStack[1])},this,e)}},{key:"update",value:function(e){e.data.warpData,e.state.game.global}},{key:"exit",value:function(e){e.data.warpData={}}}]),t}();i.default=s},{}],48:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"decodeChip",value:function(e){switch(e.type){case 1:this.gui.incScore(500),this.bonusText.show(e.x,e.y,"500",[16711935,16711680,16776960]),this.bonusSfx.play();break;case 2:this.gui.incScore(1e3),this.bonusText.show(e.x,e.y,"1000",[255,65535]),this.bonusSfx.play();break;case 3:this.gui.incScore(1500),this.bonusText.show(e.x,e.y,"1500",[65280,16776960,16711680]),this.bonusSfx.play();break;case 4:this.game.global.mines+=3,this.gui.showMines(),this.upgradeSfx.play(),this.bonusText.showUpgrade(e.x,e.y,"+3 mines");break;case 5:this.game.global.fireRate=165,this.player.weapon.fireRate=this.game.global.fireRate,this.bonusText.showUpgrade(e.x,e.y,"+fire rate"),this.upgradeSfx.play();break;case 6:this.game.global.speed=5,this.player.data.playData.speed=this.game.global.speed,this.bonusText.showUpgrade(e.x,e.y,"+speed"),this.upgradeSfx.play();break;case 7:this.game.global.lives++,this.gui.showLives(),this.bonusText.showUpgrade(e.x,e.y,"+1 OU812 Unit"),this.upgradeSfx.play();break;case 8:this.game.global.mineFlashTime=500,this.game.global.mines+=3,this.bonusText.showUpgrade(e.x,e.y,"+mine detonation"),this.upgradeSfx.play();break;case 9:this.game.global.shotSpeed=1100,this.player.weapon.bulletSpeed=this.game.global.shotSpeed,this.bonusText.showUpgrade(e.x,e.y,"+shot speed"),this.upgradeSfx.play();break;case 10:this.game.global.armour++,this.gui.showArmour(),this.bonusText.showUpgrade(e.x,e.y,"+1 armour"),this.upgradeSfx.play();break;case 11:this.game.global.bulletVarianceOn=!0,this.player.weapon.bulletAngleVariance=5,this.bonusText.showUpgrade(e.x,e.y,"+angularFire"),this.upgradeSfx.play();default:this.gui.incScore(this.game.rnd.integerInRange(10,30)),this.chipSfx.play()}}}]),e}();i.default=s},{}],49:[function(e,t,i){"use strict";var a=c(e("./states/boot")),s=c(e("./states/game")),n=c(e("./states/menu")),o=c(e("./states/nextRoom")),r=c(e("./states/preloader")),l=c(e("./states/gameover")),h=c(e("./states/restart")),u=c(e("./states/hiscore"));function c(e){return e&&e.__esModule?e:{default:e}}var f=new Phaser.Game(1201,721,Phaser.CANVAS,"botwarz-game");f.state.add("boot",new a.default),f.state.add("game",new s.default),f.state.add("restart",new h.default),f.state.add("hiscore",new u.default),f.state.add("menu",new n.default),f.state.add("nextRoom",new o.default),f.state.add("preloader",new r.default),f.state.add("gameover",new l.default),f.state.start("boot")},{"./states/boot":63,"./states/game":64,"./states/gameover":65,"./states/hiscore":66,"./states/menu":67,"./states/nextRoom":68,"./states/preloader":69,"./states/restart":70}],50:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,s=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),n=e("../classes/Fsm.js");(a=n)&&a.__esModule;var o=function(e){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,0,0,"generator",0));return i.game=t,i.state=e,i.game.add.existing(i),i.game.physics.enable(i,Phaser.Physics.ARCADE),i.width=48,i.height=48,i.body.syncBounds=!0,i.smoothed=!1,i.anchor.setTo(.5),i.kill(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,Phaser.Sprite),s(a,[{key:"init",value:function(e,t,i){this.reset(e,t),this.tint=i,this.saveTint=i,this.frame=this.game.rnd.integerInRange(1,4),this.health=2*this.frame,this.animTimer=null}},{key:"runGeneratorAnimation",value:function(){null==this.animTimer&&(this.tint=16777215,this.animTimer=this.game.time.events.add(300,function(){this.tint=this.saveTint,this.game.time.events.remove(this.animTimer),this.animTimer=null},this))}},{key:"update",value:function(){}}]),a}();i.default=o},{"../classes/Fsm.js":30}],51:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,s=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),n=e("../classes/Fsm.js"),o=(a=n)&&a.__esModule?a:{default:a};var r=function(e){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,0,0,"robot",0));return i.state=e,i.game=t,i.game.add.existing(i),i.width=96,i.height=96,i.x=24,i.y=24,i.game.physics.enable(i,Phaser.Physics.ARCADE),i.body.setSize(8,11,1,1),i.smoothed=!1,i.data={},i.animations.add("right",[5,6],12,!0),i.animations.add("left",[7,8],12,!0),i.animations.add("up",[3,4],12,!0),i.animations.add("down",[1,2],12,!0),i.palette=[16711680,16750899,16776960,16777215,16776960,16750899,16711680],i.explodePalette=[16711680,16750899,16776960],i.explodeIndex=0,i.palindex=0,i.palTimer=null,i.fsm=new o.default(i),i.kill(),i.events.onKilled.add(i.killed,i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,Phaser.Sprite),s(a,[{key:"killed",value:function(){this.data={}}},{key:"setStateStack",value:function(e){this.fsm.stateStack=e,this.fsm.setState(e[0])}},{key:"resetStateStack",value:function(){this.fsm.setState(this.fsm.stateStack[0])}},{key:"update",value:function(){this.alive&&this.fsm.stateStack&&this.fsm.update(this)}},{key:"playHitAnimation",value:function(){null==this.palTimer&&(this.palindex=0,this.tmpTint=this.tint,this.palTimer=this.game.time.events.repeat(30,7,function(){this.tint=this.palette[this.palindex],this.palindex++,this.palindex==this.palette.length&&(this.tint=this.tmpTint,this.game.time.events.remove(this.palTimer),this.palTimer=null)},this))}},{key:"die",value:function(){this.fsm.stateStack=null,this.state.explodeSfx.play(),this.state.exploder.explode(this.x+this.width/2,this.y+this.width/2,16711680,2),this.state.exploder.explode(this.x+this.width/2,this.y+this.width/2,16711680,1.5),this.kill()}}]),a}();i.default=r},{"../classes/Fsm.js":30}],52:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,s=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),n=e("../classes/Fsm.js"),o=(a=n)&&a.__esModule?a:{default:a};var r=function(e){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,0,0,"robot",0));return i.state=e,i.game=t,i.game.add.existing(i),i.game.physics.enable(i,Phaser.Physics.ARCADE),i.width=48,i.height=48,i.x=24,i.y=24,i.body.syncBounds=!0,i.smoothed=!1,i.data={},i.animations.add("right",[5,6],12,!0),i.animations.add("left",[7,8],12,!0),i.animations.add("up",[3,4],12,!0),i.animations.add("down",[1,2],12,!0),i.fsm=new o.default(i),i.events.onKilled.add(i.killed,i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,Phaser.Sprite),s(a,[{key:"killed",value:function(){}},{key:"setStateStack",value:function(e){this.fsm.stateStack=e,this.fsm.setState(e[0])}},{key:"resetStateStack",value:function(){this.fsm.setState(this.fsm.stateStack[0])}},{key:"update",value:function(){this.alive&&this.fsm.stateStack&&this.fsm.update(this)}}]),a}();i.default=r},{"../classes/Fsm.js":30}],53:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(e){function s(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var i="warpin"+t.rnd.integerInRange(1,4),a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,0,0,i,0));return a.state=e,a.game=t,a.game.add.existing(a),a.smoothed=!1,a.anchor.setTo(.5,.5),a.data={},a.animations.add("warpin",null,45,!1),a.kill(),a.events.onAnimationComplete.add(a.animComplete,a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,Phaser.Sprite),a(s,[{key:"init",value:function(e,t,i){this.s=i,this.reset(e,t),this.animations.play("warpin")}},{key:"animComplete",value:function(){this.s.alive&&(this.s.data.warpData.active=!1),this.state.startGame=!0,this.kill()}}]),s}();i.default=s},{}],54:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var a=function(e){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,0,0,"shot",0));return i.state=e,i.game=t,i.grid=i.state.grid,i.tileSize=i.game.global.tileSize,i.halfTile=i.tileSize/2,i.game.add.existing(i),i.game.physics.enable(i,Phaser.Physics.ARCADE),i.body.syncBounds=!0,i.height=6,i.smoothed=!1,i.anchor.setTo(.5),i.moveMax=8,i.mode=1,i.speed=3,i.fireTimer=null,i.kill(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,Phaser.Sprite),s(a,[{key:"fire",value:function(e,t,i){this.fireTimer||(this.state.bounceShotSfx.isPlaying||this.state.bounceShotSfx.play(),this.direction=i,this.moveCount=0,this.gx=this.grid.screenToGrid(e),this.gy=this.grid.screenToGrid(t),this.reset(this.halfTile+this.gx*this.tileSize,this.halfTile+this.gy*this.tileSize),this.fireTimer=this.game.time.events.add(50,this.move,this),this.setAngle(),this.mode=1)}},{key:"setAngle",value:function(){this.rotation=1.57*this.direction-.78}},{key:"move",value:function(){if(1==this.mode&&this.setDirection(),2==this.mode&&this.updatePosition(),this.moveCount>=this.moveMax)return this.fireTimer=null,this.state.smallExploder.explode(this.x,this.y,this.tint),void this.kill();this.fireTimer=this.game.time.events.add(10,this.move,this)}},{key:"updatePosition",value:function(){switch(this.direction){case 1:this.x+=this.speed,this.y+=this.speed,this.x>=this.tx&&this.y>=this.ty&&(this.x=this.tx,this.y=this.ty,this.mode=1);break;case 2:this.x-=this.speed,this.y+=this.speed,this.x<=this.tx&&this.y>=this.ty&&(this.x=this.tx,this.y=this.ty,this.mode=1);break;case 3:this.x-=this.speed,this.y-=this.speed,this.x<=this.tx&&this.y<=this.ty&&(this.x=this.tx,this.y=this.ty,this.mode=1);break;case 4:this.x+=this.speed,this.y-=this.speed,this.x>=this.tx&&this.y<=this.ty&&(this.x=this.tx,this.y=this.ty,this.mode=1)}}},{key:"setDirection",value:function(){this.state.grid;var e=this.direction;switch(this.sx=this.gx,this.sy=this.gy,this.direction){case 1:this.checkBottomRight()?(this.gx+=1,this.gy+=1):this.checkRight()?(this.gx+=1,this.direction=4):this.checkBottom()?(this.gy+=1,this.direction=2):this.checkTopLeft()&&(this.gx-=1,this.gy-=1,this.direction=3);break;case 2:this.checkBottomLeft()?(this.gx-=1,this.gy+=1):this.checkLeft()?(this.gx-=1,this.direction=3):this.checkBottom()?(this.gy+=1,this.direction=1):this.checkTopRight()&&(this.gx+=1,this.gy-=1,this.direction=4);break;case 3:this.checkTopLeft()?(this.gx-=1,this.gy-=1):this.checkLeft()?(this.gx-=1,this.direction=2):this.checkTop()?(this.gy-=1,this.direction=4):this.checkBottomRight()&&(this.gx+=1,this.gy+=1,this.direction=1);break;case 4:this.checkTopRight()?(this.gx+=1,this.gy-=1):this.checkTop()?(this.gy-=1,this.direction=3):this.checkRight()?(this.gx+=1,this.direction=1):this.checkBottomLeft()&&(this.gx-=1,this.gy+=1,this.direction=2)}this.tx=this.gx*this.tileSize+this.halfTile,this.ty=this.gy*this.tileSize+this.halfTile,this.sx=this.sx*this.tileSize+this.halfTile,this.sy=this.sy*this.tileSize+this.halfTile,e!=this.direction?(this.x=this.tx,this.y=this.ty,this.setAngle(),this.moveCount++,this.mode=1):this.mode=2}},{key:"checkLeft",value:function(){return this.grid.isFree(this.gx-1,this.gy)}},{key:"checkRight",value:function(){return this.grid.isFree(this.gx+1,this.gy)}},{key:"checkTop",value:function(){return this.grid.isFree(this.gx,this.gy-1)}},{key:"checkBottom",value:function(){return this.grid.isFree(this.gx,this.gy+1)}},{key:"checkTopRight",value:function(){return this.grid.isFree(this.gx+1,this.gy-1)}},{key:"checkTopLeft",value:function(){return this.grid.isFree(this.gx-1,this.gy-1)}},{key:"checkBottomRight",value:function(){return this.grid.isFree(this.gx+1,this.gy+1)}},{key:"checkBottomLeft",value:function(){return this.grid.isFree(this.gx-1,this.gy+1)}}]),a}();i.default=a},{}],55:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,s=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(e("../classes/const.js")),n=e("../prefabs/bounceShot.js"),r=(a=n)&&a.__esModule?a:{default:a};var l=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));i.state=e,i.game=e.game,i.game.add.existing(i);for(var a=0;a<5;a++){var s=new r.default(i.state,i.game);i.game.add.existing(s),i.add(s)}return i.fireTimer=i.game.time.events.loop(3e3,i.fire,i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,Phaser.Group),s(n,[{key:"fire",value:function(){var t=[];this.state.enemyRobots.forEachAlive(function(e){e.type==o.BOUNCEBOT&&t.push(e)},this,t);var e=t[this.game.rnd.integerInRange(0,t.length-1)],i=this.getFirstDead();i&&e&&(i.tint=10092543,i.fire(e.x,e.y,this.game.rnd.integerInRange(1,4)))}},{key:"update",value:function(){}}]),n}();i.default=l},{"../classes/const.js":44,"../prefabs/bounceShot.js":54}],56:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var a=function(e){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,0,0,"flash",0));return i.state=e,i.game=t,i.game.add.existing(i),i.game.physics.enable(i,Phaser.Physics.ARCADE),i.animations.add("flash",[0,1],30,!0),i.body.syncBounds=!0,i.smoothed=!1,i.width*=2,i.height*=2,i.anchor.setTo(.5),i.kill(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,Phaser.Sprite),s(a,[{key:"show",value:function(e,t){this.reset(e,t),this.animations.play("flash"),this.game.time.events.add(this.game.global.mineFlashTime,function(){this.kill()},this)}},{key:"update",value:function(){}}]),a}();i.default=a},{}],57:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,s=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),n=e("../classes/Fsm.js");(a=n)&&a.__esModule;var o=function(e){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,0,0,"mine",1));return i.state=e,i.game=t,i.game.add.existing(i),i.game.physics.enable(i,Phaser.Physics.ARCADE),i.width*=2,i.height*=2,i.body.syncBounds=!0,i.smoothed=!1,i.animations.add("blip",[0,1,2],10,!0),i.kill(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,Phaser.Sprite),s(a,[{key:"lay",value:function(e,t){this.reset(e,t),this.animations.play("blip")}},{key:"explode",value:function(){this.game.time.events.remove(this.flashTimer);var e=this.state.flashGroup.getFirstDead();e&&e.show(this.x+this.width/2,this.y+this.width/2),this.kill()}},{key:"update",value:function(){}}]),a}();i.default=o},{"../classes/Fsm.js":30}],58:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(e){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t));i.state=e,i.game=e.game;for(var a=0;a<20;a++){var s=i.game.add.sprite(0,0,"warpin1"),n=s.animations.add("explode",[],65,!1);n.reverse(),n.killOnComplete=!0,s.smoothed=!1,s.anchor.setTo(.5,.5),s.kill(),i.game.add.existing(s),i.add(s)}return i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,Phaser.Group),a(o,[{key:"explode",value:function(e,t,i){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,s=this.getFirstDead();s&&(s.reset(e,t),s.tint=i,s.animations.play("explode"),s.width=144*a,s.height=144*a)}}]),o}();i.default=s},{}],59:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var u=e("pathfinding"),s=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));i.state=e,i.game=e.game,i.game.add.existing(i),i.palette=[16777215,16776960,16763904,65280,16751103,16711935,16711680,13369344,11141120,8912896];for(var a=0;a<10;a++){var s=i.game.add.sprite(0,0,"seekerShot",0);s.tint=i.palette[a],s.smoothed=!1,s.anchor.setTo(.5,.5),i.game.physics.enable(s,Phaser.Physics.ARCADE),s.width=36,s.height=36,s.body.syncBounds=!0,s.kill(),i.game.add.existing(s),i.add(s)}return i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,Phaser.Group),a(n,[{key:"fire",value:function(e,t,i,a){if(!this.fireTimer){var s=this.state.grid.pfGrid.clone(),n=new u.AStarFinder;if(this.path=n.findPath(e,t,i,a,s),(this.pathIndex=0)!=this.path.length){for(var o=this.game.global.tileSize,r=o/2,l=0;l<this.count();l++){var h=this.getAt(l);h.reset(),h.x=r+this.path[this.pathIndex][0]*o,h.y=r+this.path[this.pathIndex][1]*o}this.state.seekerShotSfx.isPlaying||this.state.seekerShotSfx.play(),this.fireTimer=this.game.time.events.loop(150,this.move,this)}}}},{key:"isFiring",value:function(){return!!this.fireTimer}},{key:"update",value:function(){0!=this.countLiving()&&this.forEachAlive(function(e){e.angle+=20},this)}},{key:"move",value:function(){this.pathIndex++;var e=this.game.global.tileSize/2;if(this.pathIndex>=this.path.length+this.count()-1)return this.game.time.events.remove(this.fireTimer),this.fireTimer=null,void this.killAll();for(var t=0;t<this.count();t++){var i=this.pathIndex-t;i<0&&(i=0),i>=this.path.length&&(i=this.path.length-1);var a=this.getAt(t);a.x=e+this.path[i][0]*this.game.global.tileSize,a.y=e+this.path[i][1]*this.game.global.tileSize}var s=this.getAt(0),n=this.pathIndex;n>=this.path.length&&(n=this.path.length-1),s.x=e+this.path[n][0]*this.game.global.tileSize,s.y=e+this.path[n][1]*this.game.global.tileSize}}]),n}();i.default=s},{pathfinding:3}],60:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));i.state=e,i.game=e.game,i.game.add.existing(i);for(var a=0;a<20;a++){var s=i.game.add.sprite(0,0,"shrapnel",0);s.animations.add("shrapnel",[],15,!0);s.smoothed=!1,s.anchor.setTo(.5,.5),i.game.physics.enable(s,Phaser.Physics.ARCADE),i.game.add.existing(s),i.add(s),s.kill()}return i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,Phaser.Group),a(n,[{key:"detonate",value:function(e,t,i){var a=0;for(a=0;a<8;a++){var s=this.getFirstDead();s&&(s.reset(e,t),s.checkWorldBounds=!0,s.outOfBoundsKill=!0,s.tint=i,s.animations.play("shrapnel"),s.body.velocity=this.game.physics.arcade.velocityFromAngle(45*a,180),s.tint=i)}}}]),n}();i.default=s},{}],61:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));i.state=e,i.game=e.game;for(var a=0;a<20;a++){var s=i.game.add.sprite(0,0,"smallparticle");s.animations.add("explode",[],45,!1).killOnComplete=!0,s.smoothed=!1,s.anchor.setTo(.5,.5),s.kill(),i.game.add.existing(s),i.add(s)}return i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,Phaser.Group),a(n,[{key:"explode",value:function(e,t,i){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,s=this.getFirstDead();s&&(s.reset(e,t),s.tint=i,s.animations.play("explode"),s.width=48*a,s.height=48*a,s.angle=this.game.rnd.integerInRange(-180,180))}}]),n}();i.default=s},{}],62:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var a=function(e){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,0,0,"teleport",0));return i.state=e,i.game=t,i.game.add.existing(i),i.game.physics.enable(i,Phaser.Physics.ARCADE),i.smoothed=!1,i.anchor.setTo(.5),i.animations.add("glow",[0,1,2,1],20,!0),i.flashAnim=i.animations.add("flash",[3,2,1,0],5,!1),i.play("glow"),i.flashAnim.onComplete.add(function(){this.animations.play("glow")},i),i.saveTint=i.tint,i.flashTimer=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,Phaser.Sprite),s(a,[{key:"flash",value:function(){this.play("flash")}},{key:"update",value:function(){}}]),a}();i.default=a},{}],63:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.State),a(t,[{key:"preload",value:function(){this.load.image("preloader","assets/preloader.gif")}},{key:"create",value:function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0,this.game.scale.setSize()),this.initGlobalVariables(),this.setMazePalette(),this.game.global.cheat=!1,this.game.state.start("preloader")}},{key:"setMazePalette",value:function(){this.game.global.mazePalette=[39168,13789470,136,4915330,9127187,7372944,10145074,6908265,10824234],this.game.global.mazeIndex=0}},{key:"initGlobalVariables",value:function(){this.game.global={godMode:!1,mute:!1,tileSize:24,volume:.5,sw:1200,sh:720,pw:50,ph:30,exit:0,currentMap:1,mapMax:21,lives:3,rules:{},scoreTable:[{name:"Arokn Kram",score:1e6},{name:"J Minter",score:9e5},{name:"E Jarvis",score:8e5},{name:"S Reddy",score:7e5},{name:"A Mclean",score:6e5},{name:"J Inoue",score:5e5},{name:"Arokn Har",score:4e5},{name:"S Fasoulas",score:3e4},{name:"D Bailey",score:2e4},{name:"Bitmap bros",score:1e4}],maxNameLength:11}}}]),t}();i.default=s},{}],64:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(e("../classes/const.js")),n=d(e("../prefabs/smallParticleGroup.js")),o=d(e("../prefabs/particleGroup.js")),r=(d(e("../prefabs/Robot.js")),d(e("../classes/PlayState.js")),d(e("../classes/DummyState.js")),d(e("../classes/HuntState.js")),d(e("../classes/SeekState.js")),d(e("../classes/WarpState.js")),d(e("../classes/Grid.js"))),l=d(e("../classes/Gui.js")),h=d(e("../classes/ScoreTable.js")),u=d(e("../classes/Level.js")),c=d(e("../classes/Collision.js")),f=d(e("../classes/bonusText.js"));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.State),a(t,[{key:"preload",value:function(){this.game.time.advancedTiming=!0}},{key:"create",value:function(){this.startGame=!1,this.game.stage.backgroundColor="#000000",this.tileSize=this.game.global.tileSize,this.halfSize=this.game.global.tileSize/2,this.wallsGroup=this.game.add.group(),this.brickGroup=this.game.add.group(),this.game.physics.enable(this.wallsGroup,Phaser.Physics.ARCADE),this.game.physics.enable(this.brickGroup,Phaser.Physics.ARCADE),this.scoreTable=new h.default(this,this.game),this.grid=new r.default("maze",this),u.default.setUpAudio.call(this),u.default.setUpBotAudio.call(this),u.default.setUpTeleporters.call(this),u.default.setUpPlayer.call(this),u.default.setUpBounceShotGroup.call(this),u.default.setUpShrapnelGroup.call(this),u.default.setUpEnemy.call(this),u.default.setUpPortalAnimations.call(this),u.default.setUpGenerators.call(this),u.default.setUpGeneratorBots.call(this),u.default.setUpSeekerShot.call(this),u.default.setUpMotherBot.call(this),u.default.setUpEnemyShotWeapon.call(this),u.default.setUpChip.call(this),this.exploder=new o.default(this),this.smallExploder=new n.default(this),this.bonusText=new f.default(this,this.game),this.gui=new l.default(this,this.game),this.gui.showGui(),this.gui.setInstructions(),this.gui.showMute(),this.gui.showGodMode(),this.warpinSfx.play(),0<this.generators.count()&&(this.genTimer=this.game.time.events.add(1e3,this.runGenerator,this),this.generators_onlineSfx.play()),this.grid.level.suicidebots&&(this.suicideTimer=this.game.time.events.loop(5e3,this.respawnSuicideBots,this))}},{key:"update",value:function(){this.gui.update(),c.default.checkShotWallCollision.call(this),c.default.checkShotBrickCollision.call(this),c.default.checkChipCollision.call(this),this.generators&&c.default.checkGeneratorCollision.call(this),this.startGame&&(this.checkRules(),this.checkTaunt(),c.default.checkTeleporterCollision.call(this),c.default.checkMineRobotCollision.call(this),c.default.checkShotRobotCollision.call(this),c.default.checkExitCollision.call(this),c.default.checkEnemyShotWallCollision.call(this),c.default.checkEnemyShotBrickCollision.call(this),c.default.checkMotherBotCollision.call(this),this.player.alive&&!this.game.global.godMode&&c.default.checkPlayerDeath.call(this))}},{key:"runGenerator",value:function(){if(this.player.alive&&0!=this.generators.countLiving()){for(var e=this.game.rnd.integerInRange(1,5),t=0;t<e;t++){var i=null;if(null==(i=1<this.generators.countLiving()?this.generators.getRandom():this.generators.getFirstAlive()))break;if(!i.alive)break;var a=[],s=this.grid.screenToGrid(i.x),n=this.grid.screenToGrid(i.y);s-=1,n-=1,this.grid.isFreeBlock(s+2,n,2)&&a.push([s+2,n]),this.grid.isFreeBlock(s,n,2)&&a.push([s,n+2]),this.grid.isFreeBlock(s-2,n,2)&&a.push([s-2,n]),this.grid.isFreeBlock(s,n-2,2)&&a.push([s,n-2]);var o=null,r={x:(o=1==a.length?a[0]:a[this.game.rnd.integerInRange(0,a.length-1)])[0],y:o[1]};0<this.enemyRobots.countDead()&&i.runGeneratorAnimation(),this.respawnSingle(r)}this.genTimer=this.game.time.events.add(this.game.rnd.integerInRange(100,1e3),this.runGenerator,this)}}},{key:"respawnGroup",value:function(){this.game.global.tileSize;var e=this.enemyRobots.countDead()-1;this.warpinSfx.play();for(var t=0;t<e;t++)this.respawnSingle();this.game.global.respawnCount--,0==this.game.global.respawnCount&&(this.rules.respawn=!1)}},{key:"respawnSingle",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=this.enemyRobots.getFirstDead();if(null!=t&&(null==e&&(e=this.grid.getFreeSpace()),0!=e))switch(t.reset(0,0),t.x=Math.floor(e.x)*this.game.global.tileSize,t.y=Math.floor(e.y)*this.game.global.tileSize,t.resetStateStack(),t.type){case s.DRONELEADER:t.health=4}}},{key:"respawnSuicideBots",value:function(){if(!(this.enemyRobots.countLiving()<7))for(var e=0,t=this.enemyRobots.length;e<t;e++){var i=this.enemyRobots.getAt(e);if(0==i.alive&&i.type==s.SUICIDEBOT){var a=this.grid.getFreeSpace();0!=a&&(i.reset(Math.floor(a.x)*this.game.global.tileSize,Math.floor(a.y)*this.game.global.tileSize),i.resetStateStack(),i.health=5)}}}},{key:"checkTaunt",value:function(){0==this.enemyRobots.countLiving()&&this.game.time.events.remove(this.tauntTimer)}},{key:"checkRules",value:function(){if(this.rules){if(this.rules.clear_room){var e=!0;this.enemyRobots&&null!=this.enemyRobots.getFirstAlive()&&(e=!1),this.motherBots&&null!=this.motherBots.getFirstAlive()&&(e=!1),e&&(this.exitSprite.visible=!0,this.rules.clear_room=!1)}this.rules.get_chips&&null==this.chips.getFirstAlive()&&0==this.exitSprite.visible&&(this.exitSprite.visible=!0,this.rules.get_chips=!1),this.rules.respawn&&(this.enemyRobots.countLiving()+1)/this.enemyRobots.length<.4&&this.respawnGroup()}}},{key:"playerDeath",value:function(){this.player.alive&&(this.game.global.lives--,this.player.kill(),this.explodeSfx.play(),this.game.time.events.remove(this.tauntTimer),this.game.time.events.add(800,function(){this.killTaunts[this.game.rnd.integerInRange(0,this.killTaunts.length-1)].play()},this),this.exploder.explode(this.player.x+this.player.width/2,this.player.y+this.player.width/2,this.player.tint),this.playerDeathTimer=this.game.time.events.add(2*Phaser.Timer.SECOND,function(){this.game.global.lives<0?this.endGame():this.restart()},this))}},{key:"restart",value:function(){this.game.state.start("restart")}},{key:"endGame",value:function(){this.game.state.start("hiscore",!0,!1,s.ENTER_SCORE)}},{key:"render",value:function(){this.game.debug.text(this.game.time.fps||"--",2,14,"#00ff00")}}]),t}();i.default=p},{"../classes/Collision.js":27,"../classes/DummyState.js":28,"../classes/Grid.js":31,"../classes/Gui.js":32,"../classes/HuntState.js":33,"../classes/Level.js":34,"../classes/PlayState.js":35,"../classes/ScoreTable.js":37,"../classes/SeekState.js":38,"../classes/WarpState.js":41,"../classes/bonusText.js":42,"../classes/const.js":44,"../prefabs/Robot.js":52,"../prefabs/particleGroup.js":58,"../prefabs/smallParticleGroup.js":61}],65:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.State),a(t,[{key:"create",value:function(){var e=[16711935,16711680,16776960,16777215],t=0,i=this.add.bitmapText(this.game.width/2,this.game.height/2-30,"computer","GAME OVER",72);i.anchor.set(.5),this.game.time.events.loop(200,function(){e.length<=++t&&(t=0),i.tint=e[t]},this,e,t,i),this.game.time.events.add(3*Phaser.Timer.SECOND,function(){this.restartGame()},this)}},{key:"update",value:function(){}},{key:"restartGame",value:function(){this.game.state.start("menu")}}]),t}();i.default=s},{}],66:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(e("../classes/const.js"));var n=function(e){function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,Phaser.State),a(i,[{key:"init",value:function(e){if(this.mode=e,this.mode==s.ENTER_SCORE){this.pos=null;for(var t=0;t<this.game.global.scoreTable.length;t++)this.game.global.score>this.game.global.scoreTable[t].score&&(this.pos=t);null==this.pos&&this.startGameover()}}},{key:"preload",value:function(){console.clear()}},{key:"create",value:function(){switch(this.createPalette(),this.mode){case s.ATTRACT:this.createAttract();break;case s.ENTER_SCORE:this.createEnter()}}},{key:"createEnter",value:function(){this.createTitle(80),this.eTitle=this.game.add.bitmapText(600,200,"computer","ENTER YOUR NAME LEGEND",32),this.eTitle.anchor.setTo(.5),this.entryName="";var e={font:"32px Arial Black",fontWeight:"bold",fill:"#ffffff",stroke:"#999999",strokeThickness:4};this.txtNo=this.game.add.text(350,250,this.pos,e),this.txtName=this.game.add.text(405,250,this.entryName+"_",e),this.txtScore=this.game.add.text(655,250,String(this.game.global.score).padStart(7,"0"),{font:"32px Arial Black",fontWeight:"bold",fill:"#ffffff",stroke:"#999999",strokeThickness:4,boundsAlignH:"right"}),this.txtScore.setTextBounds(0,0,200,250),this.game.input.keyboard.clearCaptures(),this.game.input.keyboard.onUpCallback=this.editName,this.cindex=0,this.animTimer=this.game.time.events.loop(100,function(){this.animateColorPalette(),this.animateTitle(),this.animateEdit()},this)}},{key:"animateEdit",value:function(){var e=this.cArray[this.cindex],t=this.cArray[this.cArray.length-this.cindex],i=this.cArray[this.game.rnd.integerInRange(0,this.cArray.length-1)];i="0x"+i.substring(1),this.eTitle.tint=i,this.txtNo.fill=e,this.txtNo.stroke=t,this.txtName.fill=e,this.txtName.stroke=t,this.txtScore.fill=e,this.txtScore.stroke=t}},{key:"editName",value:function(e){var t=this.game.state.states.hiscore.entryName;this.game.state.states.hiscore.txtName;48<=e.keyCode&&e.keyCode<=90||32==e.keyCode?t.length<this.game.global.maxNameLength&&(t+=e.key,this.game.state.states.hiscore.entryName=t,this.game.state.states.hiscore.txtName.text=t+"_"):46==e.keyCode||8==e.keyCode?0<t.length&&(t=t.substring(0,t.length-1),this.game.state.states.hiscore.entryName=t,this.game.state.states.hiscore.txtName.text=t+"_"):13==e.keyCode&&(this.game.input.keyboard.onUpCallback=null,this.game.state.states.hiscore.txtName.text=t,this.game.state.states.hiscore.insertScoreEntry({name:t,score:this.game.global.score}),this.game.state.start("hiscore",!0,!1,s.ATTRACT))}},{key:"insertScoreEntry",value:function(e){console.log(this),this.game.global.scoreTable.push(e),this.game.global.scoreTable.sort(function(e,t){return t.score-e.score}),this.game.global.scoreTable.pop()}},{key:"createAttract",value:function(){this.createTitle(80),this.createScoreTable(),this.cindex=0,this.animTimer=this.game.time.events.loop(100,function(){this.animateColorPalette(),this.animateScoreEntries(),this.animateTitle()},this),this.attractTimer=this.game.time.events.add(8e3,this.startMenu,this),this.game.input.keyboard.addKey(Phaser.Keyboard.A).onDown.add(this.startGame,this)}},{key:"startGameover",value:function(){this.game.state.start("gameover")}},{key:"startGame",value:function(){this.game.state.start("game")}},{key:"startMenu",value:function(){this.game.state.start("menu")}},{key:"createScoreTable",value:function(){var s=this;this.cText=[];var n=1,o={font:"32px Arial Black",fontWeight:"bold",fill:"#ffffff",stroke:"#999999",strokeThickness:4},r={font:"32px Arial Black",fontWeight:"bold",fill:"#ffffff",stroke:"#999999",strokeThickness:4,boundsAlignH:"right"};this.game.global.scoreTable.forEach(function(e){var t=s.game.add.text(350,80+50*n,n,o),i=s.game.add.text(405,80+50*n,e.name,o),a=s.game.add.text(655,80+50*n,String(e.score).padStart(7,"0"),r);a.setTextBounds(0,0,200,80+50*n),s.cText.push([t,i,a]),n++})}},{key:"createTitle",value:function(e){this.title=this.game.add.bitmapText(600,e,"computer","OU812 LEGENDS",64),this.title.anchor.setTo(.5)}},{key:"createPalette",value:function(){this.cArray=[];for(var e=[Phaser.Color.RED,Phaser.Color.BLUE,Phaser.Color.YELLOW,Phaser.Color.GREEN,Phaser.Color.VIOLET,Phaser.Color.ORANGE,Phaser.Color.RED],t=0;t<e.length-1;t++)for(var i=e[t],a=e[t+1],s=0;s<10;s++){var n=Phaser.Color.interpolateColor(i,a,10,s,null,1);0<6-(n=n.toString(16)).length&&(n=n.padStart(6,"0")),n="#"+n,this.cArray.push(n)}for(var o=0;o<10;o++)this.cArray.push(this.cArray[o])}},{key:"animateColorPalette",value:function(){this.cindex++,this.cindex>=this.cArray.length-10&&(this.cindex=0)}},{key:"animateScoreEntries",value:function(){for(var e=0;e<10;e++){var t=this.cArray[this.cindex+e],i=this.cText[e];i[0].fill=t,i[0].stroke=this.cArray[this.cArray.length-this.cindex],i[1].fill=t,i[1].stroke=this.cArray[this.cArray.length-this.cindex],i[2].fill=t,i[2].stroke=this.cArray[this.cArray.length-this.cindex]}}},{key:"animateTitle",value:function(){var e=this.cArray[this.game.rnd.integerInRange(0,this.cArray.length-1)];e=e.substring(1),this.title.tint="0x"+e}},{key:"update",value:function(){}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),i}();i.default=n},{"../classes/const.js":44}],67:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,s=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(e("../classes/const.js")),o=e("../classes/Gui.js"),r=(a=o)&&a.__esModule?a:{default:a};var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.State),s(t,[{key:"create",value:function(){this.game.sound.volume=this.game.global.volume,this.resetGlobalVariables(),this.gui=new r.default(this,this.game),this.gui.hideGui(),this.createTitle(),this.createStory(),this.createControlsText(),this.createStartKeyText(),this.createCopyrightText(),this.setKeyInput();var e=this.createEnemyBotAnimation(),t=this.createOU812Animation(),i=this.createShotAnim(this.game.width/2+100,this.game.width/2+360,4e3),a=this.createShotAnim(this.game.width/2-100,this.game.width/2-360,6e3);e.start(),t.start(),i.start(),a.start()}},{key:"createTitle",value:function(){var e=this.game.add.sprite(this.game.width/2,this.game.height/2-180,"titleblock"),t=this.game.add.sprite(this.game.width/2,this.game.height/2-180,"gametitle");t.anchor.setTo(.5),e.anchor.setTo(.5),t.width*=2,t.height*=2,e.width*=2,e.height*=2,this.palette=[16711680,65280,16776960,39423,16711935,65535],this.palIndex=0,this.game.time.events.loop(200,function(){this.palIndex++,this.palIndex>=this.palette.length&&(this.palIndex=0),t.tint=this.palette[this.palIndex]},this,t)}},{key:"createStory",value:function(){this.game.add.text(this.game.width/2,this.game.height/2+10,'After the failure of the first robot uprising of 2084, the rebel robot army quietly rebuilt  and upgraded themselves. Mankind became complacent, believing the robot threat to be nothing more than ancient history. In 2182 robotkind resumed their assault on human civilization.  In a desparate defense, a new robot model "OU812" developed by brilliant engineer arokn kram is activated using the save the day protocol and tasked with stopping the robot threat',{font:"18px Verdana",fill:"#0099ff",align:"left",fontWeight:"normal",boundsAlignH:"left",wordWrap:!0,wordWrapWidth:800}).anchor.setTo(.5)}},{key:"createControlsText",value:function(){var e=this.game.add.text(this.game.width/2,this.game.height/2+225,"Controls\nCursor Keys = Move Bot\nW,A,S,D Keys = Fire Bot Disruptor\nF Key = Place Mine\n",{font:"18px Verdana",fill:"#ffffff",align:"center",fontWeight:"normal"});e.anchor.setTo(.5),e.addColor("#ff00ff",8),e.addColor("#ff0000",20),e.addColor("#ff00ff",30),e.addColor("#ff0000",42),e.addColor("#ff00ff",63),e.addColor("#ff0000",69)}},{key:"createStartKeyText",value:function(){var e={font:"24px Arial",fill:"#ffffff",align:"center",fontWeight:"bold"},t=this.game.add.text(this.game.width/2,this.game.height/2+280,"Press      to Start",e);t.anchor.setTo(.5),t.addColor("#00ff00",0),t.addColor("#ffff00",6),t.addColor("#00ff00",8),t.addColor("#ffff00",11),this.AkeyText=this.game.add.text(this.game.width/2-18,this.game.height/2+263,"A",e)}},{key:"createCopyrightText",value:function(){this.copyright=this.game.add.text(this.game.width/2,this.game.height-40,"Copyright(c) 2018 MCUZ Productions",{font:"18px Verdana",fill:"#0099ff",align:"center",fontWeight:"normal"}),this.copyright.anchor.setTo(.5)}},{key:"createEnemyBotAnimation",value:function(){var t=this.createBot(this.game.width/2-370,this.game.height/2+130);t.visible=!1;var i=this.createBot(this.game.width/2+370,this.game.height/2+130);i.visible=!1;var a=this.createWarpInSprite(this.game.width/2-370,this.game.height/2+130,!0,16737894),s=this.createWarpInSprite(this.game.width/2+370,this.game.height/2+130,!0,16737894),e={count:0},n=this.game.add.tween(e).to({count:10},1e3);n.onStart.add(function(){s.visible=!0,a.visible=!0,s.animations.play("warpin"),a.animations.play("warpin")},this,s,a,i,t);var o=this.game.add.tween(e).to({count:0},2e3);o.onStart.add(function(){i.visible=!0,t.visible=!0,s.visible=!1,a.visible=!1},this,i,t,s,a);var r=this.game.add.tween(e).to({count:0},1500);r.onComplete.add(function(){i.visible=!1;var e=s.animations.getAnimation("warpin");e.reverseOnce(),e.killOnComplete=!0,e.play(),s.visible=!0},this,i,s);var l=this.game.add.tween(e).to({count:0},2e3);return l.onComplete.add(function(){t.visible=!1;var e=a.animations.getAnimation("warpin");e.reverseOnce(),e.killOnComplete=!0,e.play(),a.visible=!0},this,t,a),n.chain(o),o.chain(r),r.chain(l),n}},{key:"createBot",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16737894,a=this.game.add.sprite(e,t,"robot");return a.width=48,a.height=48,a.smoothed=!1,a.tint=i,a.anchor.setTo(.5),a}},{key:"createWarpInSprite",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:16777215,s=4<arguments.length&&void 0!==arguments[4]&&arguments[4],n=this.game.add.sprite(e,t,"warpin2");return n.visible=!1,n.anchor.setTo(.5),i&&(n.width*=2,n.height*=2),n.tint=a,n.animations.add("warpin",null,45,!1),s&&n.events.onAnimationComplete.add(s,this),n}},{key:"createOU812Animation",value:function(){var e=this.createWarpInSprite(this.game.width/2,this.game.height/2+130,!0,16763989);e.animations.add("warpin",null,45,!1);var t=this.createBot(this.game.width/2,this.game.height/2+130,16763989);t.animations.add("right",[5,6],12,!0),t.animations.add("left",[7,8],12,!0),t.visible=!1;var i=this.game.add.tween({count:0}).to({count:10},1e3);i.onStart.add(function(){e.visible=!0,e.animations.play("warpin")},this,e),i.onComplete.add(function(){e.visible=!1},this,e);var a=this.game.add.tween(t).to({visible:1},2e3);a.onComplete.add(function(){t.animations.play("right")},this);var s=this.game.add.tween(t).to({x:this.game.width/2+100},1e3);s.onComplete.add(function(){t.animations.play("left")},this);var n=this.game.add.tween(t).to({x:this.game.width/2-100},2e3);n.onComplete.add(function(){t.animations.play("right")},this);var o=this.game.add.tween(t).to({x:this.game.width/2},1e3);return o.onComplete.add(function(){t.animations.stop(),t.frame=0},this),i.chain(a),a.chain(s),s.chain(n),n.chain(o),i}},{key:"createShotAnim",value:function(e,t,i){var a=this.game.add.sprite(e,this.game.height/2+130,"shot");a.anchor.setTo(.5),a.visible=!1;var s=this.game.add.tween({count:0}).to({count:10},i);s.onComplete.add(function(){a.visible=!0},this,a);var n=this.game.add.tween(a).to({x:t},500);return n.onComplete.add(function(){a.visible=!1},this,a),s.chain(n),s}},{key:"setKeyInput",value:function(){this.game.input.keyboard.addKey(Phaser.Keyboard.A).onDown.add(this.startGame,this),this.game.global.cheat&&(this.qKey=this.game.input.keyboard.addKey(Phaser.Keyboard.Q),this.wKey=this.game.input.keyboard.addKey(Phaser.Keyboard.W),this.sKey=this.game.input.keyboard.addKey(Phaser.Keyboard.S),this.mapNoText=this.game.add.text(.05*this.game.width,.05*this.game.height,"Level : "+this.game.global.currentMap,{font:"18px Arial",fill:"#00ff00",align:"left",fontWeight:"normal"}))}},{key:"update",value:function(){this.game.global.cheat&&(this.qKey&&this.qKey.justUp&&this.game.state.start("hiscore",!0,!1,n.ATTRACT),this.wKey&&this.wKey.justUp&&(this.game.global.currentMap+=1),this.sKey&&this.sKey.justUp&&(this.game.global.currentMap-=1),this.game.global.currentMap>this.game.global.mapMax&&(this.game.global.currentMap=1),this.game.global.currentMap<1&&(this.game.global.currentMap=this.game.global.mapMax),this.mapNoText.text="Level : "+this.game.global.currentMap)}},{key:"resetGlobalVariables",value:function(){this.game.global.speed=4,this.game.global.shotSpeed=950,this.game.global.fireRate=250,this.game.global.mineFlashTime=150,this.game.global.bulletVarianceOn=!1,this.game.global.currentMap=1,this.game.global.mazeIndex=this.game.math.wrap(this.game.global.currentMap,0,this.game.global.mazePalette.length-1),this.game.global.lives=3,this.game.global.score=0,this.game.global.rules={},this.game.global.mines=3,this.game.global.armour=3,this.exit=0}},{key:"startGame",value:function(){this.game.state.start("game")}}]),t}();i.default=l},{"../classes/Gui.js":32,"../classes/const.js":44}],68:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(e){function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,Phaser.State),a(i,[{key:"preload",value:function(){}},{key:"create",value:function(){this.game.global.currentMap++,this.game.global.mines++,this.game.global.currentMap>this.game.global.mapMax&&(this.game.global.currentMap=1),this.game.global.mazeIndex=this.game.math.wrap(this.game.global.currentMap,0,this.game.global.mazePalette.length-1),this.game.time.events.add(1*Phaser.Timer.SECOND,function(){this.game.state.start("game")},this)}},{key:"update",value:function(){}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),i}();i.default=s},{}],69:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.ready=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.State),a(t,[{key:"preload",value:function(){this.progressBar=this.add.graphics(),this.progressBox=this.add.graphics(),this.progressBox.beginFill(2236962,.8),this.progressBox.drawRect(415,360,370,50),this.loadText=this.game.add.text(600,340,"Loading...",{font:"24px Arial",fill:"#ffffff",align:"center"}),this.loadText.anchor.setTo(.5),this.loadMsg=this.game.add.text(600,430,"loading asset: ",{font:"16px Arial",fill:"#ffffff",align:"center"}),this.loadMsg.anchor.setTo(.5),this.game.load.onFileStart.add(this.fileProgress,this),this.game.load.onFileComplete.add(this.showProgress,this),this.game.load.onLoadComplete.add(this.onLoadComplete,this),this.loadResources()}},{key:"fileProgress",value:function(e,t,i){e<25?this.loadText.text="weapons configuration check ...":e<50?this.loadText.text="loading combat subroutines ...":e<75?this.loadText.text="initializing save the day protocol ...":e<=100&&(this.loadText.text="GET IT ON!"),this.loadMsg.text="loading bot component: "+t}},{key:"showProgress",value:function(e,t){this.progressBar.clear(),this.progressBar.beginFill(16777215,1),this.progressBar.drawRect(425,370,e/100*350,30)}},{key:"create",value:function(){}},{key:"update",value:function(){this.ready&&this.game.state.start("menu")}},{key:"loadResources",value:function(){console.log("*** preloading assets ***"),this.loadImages(),this.loadSpriteSheets(),this.loadJsonData(),this.loadAudio(),this.loadBotAudio(),this.loadFonts(),console.log("*** preloading assets completed ***")}},{key:"loadImages",value:function(){for(var e=["shot","wall","gametitle","titleblock","seekerShot"],t=0;t<e.length;t++)this.game.cache.removeImage(e[t]),console.log("loading "+e[t]+"..."),this.load.image(e[t],"../assets/"+e[t]+".png")}},{key:"loadSpriteSheets",value:function(){for(var e=[["shrapnel",20,20],["portal",50,50],["teleport",48,48],["flash",48,48],["mine",8,8],["smallparticle",16,16],["chip",24,24],["robot",10,13],["tiles",26,26],["maze",50,30],["exit",48,48],["warpin1",144,144],["warpin2",144,144],["warpin3",144,144],["warpin4",144,144],["generator",26,26]],t=0;t<e.length;t++)console.log("loading "+e[t][0]+"..."),this.game.cache.checkImageKey(e[t][0])&&this.game.cache.removeSpriteSheet(e[t][0]),this.load.spritesheet(e[t][0],"../assets/"+e[t][0]+".png",e[t][1],e[t][2])}},{key:"loadJsonData",value:function(){this.loadMaps(),this.loadLevels()}},{key:"loadLevels",value:function(){for(var e=1;e<=this.game.global.mapMax;e++)this.game.cache.removeJSON("r"+e,"../assets/levels/r"+e+".json"),this.load.json("r"+e,"../assets/levels/r"+e+".json")}},{key:"loadMaps",value:function(){for(var e=[["bezerk",7],["robotron",4],["crossroads",4],["gauntlet",3]],t=0;t<e.length;t++)for(var i=e[t][0],a=e[t][1],s=0;s<a;s++){var n=i+(s+1);this.game.cache.removeJSON(n,"../assets/maps/"+n+".json"),this.load.json(n,"../assets/maps/"+n+".json")}this.game.cache.removeJSON("test","../assets/maps/test.json"),this.load.json("test","../assets/maps/test.json")}},{key:"loadBotAudio",value:function(){for(var e=["destroy_the_intruder","the_intruder_must_not_escape","charge_the_intruder","kill_all_humans","attack_pattern_analysis_complete","why_do_you_persist","resistance_is_futile","you_need_an_upgrade","hasta_la_vista_baby","destroy_the_malfunction","you_have_inferior_circuitry","virus_eliminated","ou812_comply","run_like_a_chicken","ha_ha_ha_ha","generators_online"],t=0;t<e.length;t++){var i=e[t]+"Sfx";console.log("loading "+i+" ..."),this.load.audio(i,"../assets/botSfx/"+e[t]+".wav")}}},{key:"loadAudio",value:function(){for(var e=["playerhit","teleport","upgrade","bonus","bounceShot","seekerShot","speedup","laser","warpin","explode","invincible","damage","botshot","chip"],t=0;t<e.length;t++)this.load.audio(e[t]+"Sfx","../assets/sfx/"+e[t]+".wav")}},{key:"loadFonts",value:function(){this.game.load.bitmapFont("computer","../assets/fonts/computerfont.png","../assets/fonts/computerfont.fnt"),this.game.load.bitmapFont("arcade","../assets/fonts/font.png","../assets/fonts/font.fnt")}},{key:"onLoadComplete",value:function(){this.ready=!0}}]),t}();i.default=s},{}],70:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}();var s=function(e){function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,Phaser.State),a(i,[{key:"create",value:function(){this.resetUpgrades();var e=[16711935,16711680,16776960,16777215],t=0,i=this.add.bitmapText(this.game.width/2,this.game.height/2-30,"computer",this.game.global.lives+" OU812 UNITS LEFT",64);1==this.game.global.lives&&(i.text="1 OU812 UNIT LEFT"),this.game.global.lives<=0&&(i.text="THIS IS THE LAST OU812 UNIT"),i.anchor.set(.5),this.game.time.events.loop(200,function(){e.length<=++t&&(t=0),i.tint=e[t]},this,e,t,i),this.game.time.events.add(3*Phaser.Timer.SECOND,function(){this.game.state.start("game")},this)}},{key:"resetUpgrades",value:function(){this.game.global.speed=4,this.game.global.shotSpeed=950,this.game.global.fireRate=250,this.game.global.mineFlashTime=150,this.game.global.bulletVarianceOn=!1}},{key:"update",value:function(){}}]),i}();i.default=s},{}]},{},[49]);
